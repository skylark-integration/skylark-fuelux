/**
 * skylark-fuelux - A version of fuelux that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylarkui/skylark-fuelux/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-domx/browser","skylark-domx/eventer","skylark-domx/noder","skylark-domx/geom","skylark-domx/query"],function(e,t,n,i,o,l){var r=l.fn.infinitescroll,s=function(t,n){this.$element=l(t),this.$element.addClass("infinitescroll"),this.options=e.mixin({},l.fn.infinitescroll.defaults,n),this.curScrollTop=this.$element.scrollTop(),this.curPercentage=this.getPercentage(),this.fetchingData=!1,this.$element.on("scroll.fu.infinitescroll",e.proxy(this.onScroll,this)),this.onScroll()};s.prototype={constructor:s,destroy:function(){return this.$element.remove(),this.$element.empty(),this.$element[0].outerHTML},disable:function(){this.$element.off("scroll.fu.infinitescroll")},enable:function(){this.$element.on("scroll.fu.infinitescroll",e.proxy(this.onScroll,this))},end:function(e){var t=l('<div class="infinitescroll-end"></div>');e?t.append(e):t.append("---------"),this.$element.append(t),this.disable()},getPercentage:function(){var e="border-box"===this.$element.css("box-sizing")?this.$element.outerHeight():this.$element.height(),t=this.$element.get(0).scrollHeight;return t>e?e/(t-this.curScrollTop)*100:0},fetchData:function(e){var t,n=l('<div class="infinitescroll-load"></div>'),i=this,o=function(){var e={percentage:i.curPercentage,scrollTop:i.curScrollTop},t=l('<div class="loader"></div>');n.append(t),t.loader(),i.options.dataSource&&i.options.dataSource(e,function(e){var t;n.remove(),e.content&&i.$element.append(e.content),e.end&&(t=!0!==e.end?e.end:void 0,i.end(t)),i.fetchingData=!1})};this.fetchingData=!0,this.$element.append(n),this.options.hybrid&&!0!==e?(t=l('<button type="button" class="btn btn-primary"></button>'),"object"==typeof this.options.hybrid?t.append(this.options.hybrid.label):t.append('<span class="glyphicon glyphicon-repeat"></span>'),t.on("click.fu.infinitescroll",function(){t.remove(),o()}),n.append(t)):o()},onScroll:function(e){this.curScrollTop=this.$element.scrollTop(),this.curPercentage=this.getPercentage(),!this.fetchingData&&this.curPercentage>=this.options.percentage&&this.fetchData()}},l.fn.infinitescroll=function(e){var t,n=Array.prototype.slice.call(arguments,1),i=this.each(function(){var i=l(this),o=i.data("fu.infinitescroll"),r="object"==typeof e&&e;o||i.data("fu.infinitescroll",o=new s(this,r)),"string"==typeof e&&(t=o[e].apply(o,n))});return void 0===t?i:t},l.fn.infinitescroll.defaults={dataSource:null,hybrid:!1,percentage:95},l.fn.infinitescroll.Constructor=s,l.fn.infinitescroll.noConflict=function(){return l.fn.infinitescroll=r,this}});
//# sourceMappingURL=sourcemaps/infinite-scroll.js.map
