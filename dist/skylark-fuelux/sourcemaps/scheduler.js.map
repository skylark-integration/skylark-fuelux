{"version":3,"sources":["scheduler.js"],"names":["define","langx","browser","eventer","noder","geom","$","fuelux","old","fn","scheduler","Scheduler","WidgetBase","inherit","klassName","init","element","options","self","this","$element","mixin","defaults","$startDate","find","$startTime","$timeZone","$repeatIntervalPanel","$repeatIntervalSelect","$repeatIntervalSpinbox","$repeatIntervalTxt","$end","$endSelect","$endAfter","$endDate","$recurrencePanels","selectlist","datepicker","startDateOptions","startDateResponse","startDateChanged","_guessEndDate","on","proxy","combobox","val","spinbox","value","min","limitToStep","endDateOptions","radio","repeatIntervalSelectChanged","endSelectChanged","e","data","changed","destroy","markup","each","attr","empty","outerHTML","remove","propagate","stopPropagation","trigger","undefined","currentTarget","originalEvent","getValue","disable","toggleState","enable","setUtcTime","day","time","offset","dateSplit","split","timeSplit","utcDate","Date","UTC","setUTCHours","getUTCHours","expression","offsetMatch","RegExp","join","exec","offsetDirection","offsetInteger","modifier","parseInt","localDifference","getTimezoneOffset","setMinutes","parent","addClass","removeClass","interval","end","start","increment","is","_incrementDate","startTime","pattern","repeat","toLowerCase","text","days","hasAm","hasPm","month","pos","startDateTime","type","timeZone","_getFormattedDate","search","trim","replace","push","duration","recurrencePattern","substring","length","selectedItem","txt","_parseAndSetRecurrencePattern","commaPatternSplit","$repeatMonthlyDate","$repeatYearlyDate","$repeatYearlyDay","recur","i","item","semiColonPatternSplit","toUpperCase","FREQ","BYDAY","INTERVAL","COUNT","el","prop","removeAttr","BYMONTHDAY","$repeatMonthlyDay","BYSETPOS","BYMONTH","UNTIL","untilSplit","untilDate","splice","timezoneOffset","utcEndHours","time24HourFormat","_parseStartDateTime","startTimeISO8601","hours","minutes","period","timeZoneOffset","time24HourFormatSplit","time12HourFormat","time12HourFormatWithPeriod","_parseTimeZone","timeZoneQuerySelector","key","_setTimeUI","_setTimeZoneUI","querySelector","setValue","startDate","utcStartHours","currentDate","getFullYear","getMonth","getDate","action","dateObj","dash","fdate","INTERVALS","secondly","minutely","ONE_SECOND","hourly","ONE_MINUTE","daily","ONE_HOUR","weekly","ONE_DAY","monthly","ONE_WEEK","yearly","getTime","option","methodReturn","args","Array","prototype","slice","call","arguments","$set","$this","apply","Constructor","noConflict"],"mappings":"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","file":"../scheduler.js","sourcesContent":["define([\n  \"skylark-langx/langx\",\n  \"skylark-domx/browser\",\n  \"skylark-domx/eventer\",\n  \"skylark-domx/noder\",\n  \"skylark-domx/geom\",\n  \"skylark-domx/query\",\n  \"./fuelux\",\n  \"./combobox\",\n  \"./datepicker\",\n  \"./radio\",\n  \"./selectlist\",\n  \"./spinbox\"\n],function(langx,browser,eventer,noder,geom,$,fuelux){\n\n\t/*\n\t * Fuel UX Scheduler\n\t * https://github.com/ExactTarget/fuelux\n\t *\n\t * Copyright (c) 2014 ExactTarget\n\t * Licensed under the BSD New license.\n\t */\n\n\t// -- END UMD WRAPPER PREFACE --\n\n\t// -- BEGIN MODULE CODE HERE --\n\n\tvar old = $.fn.scheduler;\n\n\t// SCHEDULER CONSTRUCTOR AND PROTOTYPE\n\n\tvar Scheduler = fuelux.Scheduler = fuelux.WidgetBase.inherit({\n\t\tklassName: \"Scheduler\",\n\n\t\tinit : function(element,options) {\n\t\t\tvar self = this;\n\n\t\t\tthis.$element = $(element);\n\t\t\tthis.options = langx.mixin({}, $.fn.scheduler.defaults, options);\n\n\t\t\t// cache elements\n\t\t\tthis.$startDate = this.$element.find('.start-datetime .start-date');\n\t\t\tthis.$startTime = this.$element.find('.start-datetime .start-time');\n\n\t\t\tthis.$timeZone = this.$element.find('.timezone-container .timezone');\n\n\t\t\tthis.$repeatIntervalPanel = this.$element.find('.repeat-every-panel');\n\t\t\tthis.$repeatIntervalSelect = this.$element.find('.repeat-options');\n\n\t\t\tthis.$repeatIntervalSpinbox = this.$element.find('.repeat-every');\n\t\t\tthis.$repeatIntervalTxt = this.$element.find('.repeat-every-text');\n\n\t\t\tthis.$end = this.$element.find('.repeat-end');\n\t\t\tthis.$endSelect = this.$end.find('.end-options');\n\t\t\tthis.$endAfter = this.$end.find('.end-after');\n\t\t\tthis.$endDate = this.$end.find('.end-on-date');\n\n\t\t\t// panels\n\t\t\tthis.$recurrencePanels = this.$element.find('.repeat-panel');\n\n\n\t\t\tthis.$repeatIntervalSelect.selectlist();\n\n\t\t\t//initialize sub-controls\n\t\t\tthis.$element.find('.selectlist').selectlist();\n\t\t\tthis.$startDate.datepicker(this.options.startDateOptions);\n\n\t\t\tvar startDateResponse = (typeof this.options.startDateChanged === \"function\") ? this.options.startDateChanged : this._guessEndDate;\n\t\t\tthis.$startDate.on('change changed.fu.datepicker dateClicked.fu.datepicker', langx.proxy(startDateResponse, this));\n\n\t\t\tthis.$startTime.combobox();\n\t\t\t// init start time\n\t\t\tif (this.$startTime.find('input').val() === '') {\n\t\t\t\tthis.$startTime.combobox('selectByIndex', 0);\n\t\t\t}\n\n\t\t\t// every 0 days/hours doesn't make sense, change if not set\n\t\t\tif (this.$repeatIntervalSpinbox.find('input').val() === '0') {\n\t\t\t\tthis.$repeatIntervalSpinbox.spinbox({\n\t\t\t\t\t'value': 1,\n\t\t\t\t\t'min': 1,\n\t\t\t\t\t'limitToStep': true\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$repeatIntervalSpinbox.spinbox({\n\t\t\t\t\t'min': 1,\n\t\t\t\t\t'limitToStep': true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.$endAfter.spinbox({\n\t\t\t\t'value': 1,\n\t\t\t\t'min': 1,\n\t\t\t\t'limitToStep': true\n\t\t\t});\n\t\t\tthis.$endDate.datepicker(this.options.endDateOptions);\n\t\t\tthis.$element.find('.radio-custom').radio();\n\n\t\t\t// bind events: 'change' is a Bootstrap JS fired event\n\t\t\tthis.$repeatIntervalSelect.on('changed.fu.selectlist', langx.proxy(this.repeatIntervalSelectChanged, this));\n\t\t\tthis.$endSelect.on('changed.fu.selectlist', langx.proxy(this.endSelectChanged, this));\n\t\t\tthis.$element.find('.repeat-days-of-the-week .btn-group .btn').on('change.fu.scheduler', function (e, data) {\n\t\t\t\tself.changed(e, data, true);\n\t\t\t});\n\t\t\tthis.$element.find('.combobox').on('changed.fu.combobox', langx.proxy(this.changed, this));\n\t\t\tthis.$element.find('.datepicker').on('changed.fu.datepicker', langx.proxy(this.changed, this));\n\t\t\tthis.$element.find('.datepicker').on('dateClicked.fu.datepicker', langx.proxy(this.changed, this));\n\t\t\tthis.$element.find('.selectlist').on('changed.fu.selectlist', langx.proxy(this.changed, this));\n\t\t\tthis.$element.find('.spinbox').on('changed.fu.spinbox', langx.proxy(this.changed, this));\n\t\t\tthis.$element.find('.repeat-monthly .radio-custom, .repeat-yearly .radio-custom').on('change.fu.scheduler', langx.proxy(this.changed, this));\n\t\t},\n\n\t\tdestroy: function destroy() {\n\t\t\tvar markup;\n\t\t\t// set input value attribute\n\t\t\tthis.$element.find('input').each(function () {\n\t\t\t\t$(this).attr('value', $(this).val());\n\t\t\t});\n\n\t\t\t// empty elements to return to original markup and store\n\t\t\tthis.$element.find('.datepicker .calendar').empty();\n\n\t\t\tmarkup = this.$element[0].outerHTML;\n\n\t\t\t// destroy components\n\t\t\tthis.$element.find('.combobox').combobox('destroy');\n\t\t\tthis.$element.find('.datepicker').datepicker('destroy');\n\t\t\tthis.$element.find('.selectlist').selectlist('destroy');\n\t\t\tthis.$element.find('.spinbox').spinbox('destroy');\n\t\t\tthis.$element.find('.radio-custom').radio('destroy');\n\t\t\tthis.$element.remove();\n\n\t\t\t// any external bindings\n\t\t\t// [none]\n\n\t\t\treturn markup;\n\t\t},\n\n\t\tchanged: function changed(e, data, propagate) {\n\t\t\tif (!propagate) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\n\t\t\tthis.$element.trigger('changed.fu.scheduler', {\n\t\t\t\tdata: (data !== undefined) ? data : $(e.currentTarget).data(),\n\t\t\t\toriginalEvent: e,\n\t\t\t\tvalue: this.getValue()\n\t\t\t});\n\t\t},\n\n\t\tdisable: function disable() {\n\t\t\tthis.toggleState('disable');\n\t\t},\n\n\t\tenable: function enable() {\n\t\t\tthis.toggleState('enable');\n\t\t},\n\n\t\tsetUtcTime: function setUtcTime(day, time, offset) {\n\t\t\tvar dateSplit = day.split('-');\n\t\t\tvar timeSplit = time.split(':');\n\t\t\tfunction z(n) {\n\t\t\t\treturn (n < 10 ? '0' : '') + n;\n\t\t\t}\n\n\t\t\tvar utcDate = new Date(Date.UTC(dateSplit[0], (dateSplit[1] - 1), dateSplit[2], timeSplit[0], timeSplit[1], (timeSplit[2] ? timeSplit[2] : 0)));\n\n\t\t\tif (offset === 'Z') {\n\t\t\t\tutcDate.setUTCHours(utcDate.getUTCHours() + 0);\n\t\t\t} else {\n\t\t\t\tvar expression = [];\n\t\t\t\texpression[0] = '(.)'; // Any Single Character 1\n\t\t\t\texpression[1] = '.*?'; // Non-greedy match on filler\n\t\t\t\texpression[2] = '\\\\d'; // Uninteresting and ignored: d\n\t\t\t\texpression[3] = '.*?'; // Non-greedy match on filler\n\t\t\t\texpression[4] = '(\\\\d)'; // Any Single Digit 1\n\n\t\t\t\tvar p = new RegExp(expression.join(''), [\"i\"]);\n\t\t\t\tvar offsetMatch = p.exec(offset);\n\t\t\t\tif (offsetMatch !== null) {\n\t\t\t\t\tvar offsetDirection = offsetMatch[1];\n\t\t\t\t\tvar offsetInteger = offsetMatch[2];\n\t\t\t\t\tvar modifier = (offsetDirection === '+') ? 1 : -1;\n\n\t\t\t\t\tutcDate.setUTCHours(utcDate.getUTCHours() + (modifier * parseInt(offsetInteger, 10)));\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar localDifference = utcDate.getTimezoneOffset();\n\t\t\tutcDate.setMinutes(localDifference);\n\t\t\treturn utcDate;\n\t\t},\n\n\t\t// called when the end range changes\n\t\t// (Never, After, On date)\n\t\tendSelectChanged: function endSelectChanged(e, data) {\n\t\t\tvar selectedItem, val;\n\n\t\t\tif (!data) {\n\t\t\t\tselectedItem = this.$endSelect.selectlist('selectedItem');\n\t\t\t\tval = selectedItem.value;\n\t\t\t} else {\n\t\t\t\tval = data.value;\n\t\t\t}\n\n\t\t\t// hide all panels\n\t\t\tthis.$endAfter.parent().addClass('hidden');\n\t\t\tthis.$endAfter.parent().attr('aria-hidden', 'true');\n\n\t\t\tthis.$endDate.parent().addClass('hidden');\n\t\t\tthis.$endDate.parent().attr('aria-hidden', 'true');\n\n\t\t\tif (val === 'after') {\n\t\t\t\tthis.$endAfter.parent().removeClass('hide hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\tthis.$endAfter.parent().attr('aria-hidden', 'false');\n\t\t\t} else if (val === 'date') {\n\t\t\t\tthis.$endDate.parent().removeClass('hide hidden');\t// jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\tthis.$endDate.parent().attr('aria-hidden', 'false');\n\t\t\t}\n\t\t},\n\n\t\t_guessEndDate: function _guessEndDate() {\n\t\t\tvar interval = this.$repeatIntervalSelect.selectlist('selectedItem').value;\n\t\t\tvar end = new Date(this.$endDate.datepicker('getDate'));\n\t\t\tvar start = new Date(this.$startDate.datepicker('getDate'));\n\t\t\tvar increment = this.$repeatIntervalSpinbox.find('input').val();\n\n\t\t\tif(interval !== \"none\" && end <= start){\n\t\t\t\t// if increment spinbox is hidden, user has no idea what it is set to and it is probably not set to\n\t\t\t\t// something they intended. Safest option is to set date forward by an increment of 1.\n\t\t\t\t// this will keep monthly & yearly from auto-incrementing by more than a single interval\n\t\t\t\tif(!this.$repeatIntervalSpinbox.is(':visible')){\n\t\t\t\t\tincrement = 1;\n\t\t\t\t}\n\n\t\t\t\t// treat weekdays as weekly. This treats all \"weekdays\" as a single set, of which a single increment\n\t\t\t\t// is one week.\n\t\t\t\tif(interval === \"weekdays\"){\n\t\t\t\t\tincrement = 1;\n\t\t\t\t\tinterval = \"weekly\";\n\t\t\t\t}\n\n\t\t\t\tend = _incrementDate(start, end, interval, increment);\n\n\t\t\t\tthis.$endDate.datepicker('setDate', end);\n\t\t\t}\n\t\t},\n\n\t\tgetValue: function getValue() {\n\t\t\t// FREQ = frequency (secondly, minutely, hourly, daily, weekdays, weekly, monthly, yearly)\n\t\t\t// BYDAY = when picking days (MO,TU,WE,etc)\n\t\t\t// BYMONTH = when picking months (Jan,Feb,March) - note the values should be 1,2,3...\n\t\t\t// BYMONTHDAY = when picking days of the month (1,2,3...)\n\t\t\t// BYSETPOS = when picking First,Second,Third,Fourth,Last (1,2,3,4,-1)\n\n\t\t\tvar interval = this.$repeatIntervalSpinbox.spinbox('value');\n\t\t\tvar pattern = '';\n\t\t\tvar repeat = this.$repeatIntervalSelect.selectlist('selectedItem').value;\n\t\t\tvar startTime;\n\n\t\t\tif (this.$startTime.combobox('selectedItem').value) {\n\t\t\t\tstartTime = this.$startTime.combobox('selectedItem').value;\n\t\t\t\tstartTime = startTime.toLowerCase();\n\n\t\t\t} else {\n\t\t\t\tstartTime = this.$startTime.combobox('selectedItem').text.toLowerCase();\n\t\t\t}\n\n\t\t\tvar timeZone = this.$timeZone.selectlist('selectedItem');\n\t\t\tvar day, days, hasAm, hasPm, month, pos, startDateTime, type;\n\n\t\t\tstartDateTime = '' + _getFormattedDate(this.$startDate.datepicker('getDate'), '-');\n\n\t\t\tstartDateTime += 'T';\n\t\t\thasAm = (startTime.search('am') >= 0);\n\t\t\thasPm = (startTime.search('pm') >= 0);\n\t\t\tstartTime = langx.trim(startTime.replace(/am/g, '').replace(/pm/g, '')).split(':');\n\t\t\tstartTime[0] = parseInt(startTime[0], 10);\n\t\t\tstartTime[1] = parseInt(startTime[1], 10);\n\t\t\tif (hasAm && startTime[0] > 11) {\n\t\t\t\tstartTime[0] = 0;\n\t\t\t} else if (hasPm && startTime[0] < 12) {\n\t\t\t\tstartTime[0] += 12;\n\t\t\t}\n\n\t\t\tstartDateTime += (startTime[0] < 10) ? '0' + startTime[0] : startTime[0];\n\t\t\tstartDateTime += ':';\n\t\t\tstartDateTime += (startTime[1] < 10) ? '0' + startTime[1] : startTime[1];\n\n\t\t\tstartDateTime += (timeZone.offset === '+00:00') ? 'Z' : timeZone.offset;\n\n\t\t\tif (repeat === 'none') {\n\t\t\t\tpattern = 'FREQ=DAILY;INTERVAL=1;COUNT=1;';\n\t\t\t} else if (repeat === 'secondly') {\n\t\t\t\tpattern = 'FREQ=SECONDLY;';\n\t\t\t\tpattern += 'INTERVAL=' + interval + ';';\n\t\t\t} else if (repeat === 'minutely') {\n\t\t\t\tpattern = 'FREQ=MINUTELY;';\n\t\t\t\tpattern += 'INTERVAL=' + interval + ';';\n\t\t\t} else if (repeat === 'hourly') {\n\t\t\t\tpattern = 'FREQ=HOURLY;';\n\t\t\t\tpattern += 'INTERVAL=' + interval + ';';\n\t\t\t} else if (repeat === 'daily') {\n\t\t\t\tpattern += 'FREQ=DAILY;';\n\t\t\t\tpattern += 'INTERVAL=' + interval + ';';\n\t\t\t} else if (repeat === 'weekdays') {\n\t\t\t\tpattern += 'FREQ=WEEKLY;';\n\t\t\t\tpattern += 'BYDAY=MO,TU,WE,TH,FR;';\n\t\t\t\tpattern += 'INTERVAL=1;';\n\t\t\t} else if (repeat === 'weekly') {\n\t\t\t\tdays = [];\n\t\t\t\tthis.$element.find('.repeat-days-of-the-week .btn-group input:checked').each(function () {\n\t\t\t\t\tdays.push($(this).data().value);\n\t\t\t\t});\n\n\t\t\t\tpattern += 'FREQ=WEEKLY;';\n\t\t\t\tpattern += 'BYDAY=' + days.join(',') + ';';\n\t\t\t\tpattern += 'INTERVAL=' + interval + ';';\n\t\t\t} else if (repeat === 'monthly') {\n\t\t\t\tpattern += 'FREQ=MONTHLY;';\n\t\t\t\tpattern += 'INTERVAL=' + interval + ';';\n\t\t\t\ttype = this.$element.find('input[name=repeat-monthly]:checked').val();\n\n\t\t\t\tif (type === 'bymonthday') {\n\t\t\t\t\tday = parseInt(this.$element.find('.repeat-monthly-date .selectlist').selectlist('selectedItem').text, 10);\n\t\t\t\t\tpattern += 'BYMONTHDAY=' + day + ';';\n\t\t\t\t} else if (type === 'bysetpos') {\n\t\t\t\t\tdays = this.$element.find('.repeat-monthly-day .month-days').selectlist('selectedItem').value;\n\t\t\t\t\tpos = this.$element.find('.repeat-monthly-day .month-day-pos').selectlist('selectedItem').value;\n\t\t\t\t\tpattern += 'BYDAY=' + days + ';';\n\t\t\t\t\tpattern += 'BYSETPOS=' + pos + ';';\n\t\t\t\t}\n\n\t\t\t} else if (repeat === 'yearly') {\n\t\t\t\tpattern += 'FREQ=YEARLY;';\n\t\t\t\ttype = this.$element.find('input[name=repeat-yearly]:checked').val();\n\n\t\t\t\tif (type === 'bymonthday') {\n\t\t\t\t\t// there are multiple .year-month classed elements in scheduler markup\n\t\t\t\t\tmonth = this.$element.find('.repeat-yearly-date .year-month').selectlist('selectedItem').value;\n\t\t\t\t\tday = this.$element.find('.repeat-yearly-date .year-month-day').selectlist('selectedItem').text;\n\t\t\t\t\tpattern += 'BYMONTH=' + month + ';';\n\t\t\t\t\tpattern += 'BYMONTHDAY=' + day + ';';\n\t\t\t\t} else if (type === 'bysetpos') {\n\t\t\t\t\tdays = this.$element.find('.repeat-yearly-day .year-month-days').selectlist('selectedItem').value;\n\t\t\t\t\tpos = this.$element.find('.repeat-yearly-day .year-month-day-pos').selectlist('selectedItem').value;\n\t\t\t\t\t// there are multiple .year-month classed elements in scheduler markup\n\t\t\t\t\tmonth = this.$element.find('.repeat-yearly-day .year-month').selectlist('selectedItem').value;\n\n\t\t\t\t\tpattern += 'BYDAY=' + days + ';';\n\t\t\t\t\tpattern += 'BYSETPOS=' + pos + ';';\n\t\t\t\t\tpattern += 'BYMONTH=' + month + ';';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar end = this.$endSelect.selectlist('selectedItem').value;\n\t\t\tvar duration = '';\n\n\t\t\t// if both UNTIL and COUNT are not specified, the recurrence will repeat forever\n\t\t\t// http://tools.ietf.org/html/rfc2445#section-4.3.10\n\t\t\tif (repeat !== 'none') {\n\t\t\t\tif (end === 'after') {\n\t\t\t\t\tduration = 'COUNT=' + this.$endAfter.spinbox('value') + ';';\n\t\t\t\t} else if (end === 'date') {\n\t\t\t\t\tduration = 'UNTIL=' + _getFormattedDate(this.$endDate.datepicker('getDate'), '') + ';';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tpattern += duration;\n\t\t\t// remove trailing semicolon\n\t\t\tpattern = pattern.substring(pattern.length - 1) === ';' ? pattern.substring(0, pattern.length - 1) : pattern;\n\n\t\t\tvar data = {\n\t\t\t\tstartDateTime: startDateTime,\n\t\t\t\ttimeZone: timeZone,\n\t\t\t\trecurrencePattern: pattern\n\t\t\t};\n\n\t\t\treturn data;\n\t\t},\n\n\t\t// called when the repeat interval changes\n\t\t// (None, Hourly, Daily, Weekdays, Weekly, Monthly, Yearly\n\t\trepeatIntervalSelectChanged: function repeatIntervalSelectChanged(e, data) {\n\t\t\tvar selectedItem, val, txt;\n\n\t\t\tif (!data) {\n\t\t\t\tselectedItem = this.$repeatIntervalSelect.selectlist('selectedItem');\n\t\t\t\tval = selectedItem.value || \"\";\n\t\t\t\ttxt = selectedItem.text || \"\";\n\t\t\t} else {\n\t\t\t\tval = data.value;\n\t\t\t\ttxt = data.text;\n\t\t\t}\n\n\t\t\t// set the text\n\t\t\tthis.$repeatIntervalTxt.text(txt);\n\n\t\t\tswitch (val.toLowerCase()) {\n\t\t\t\tcase 'hourly':\n\t\t\t\tcase 'daily':\n\t\t\t\tcase 'weekly':\n\t\t\t\tcase 'monthly':\n\t\t\t\t\tthis.$repeatIntervalPanel.removeClass('hide hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\t\tthis.$repeatIntervalPanel.attr('aria-hidden', 'false');\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.$repeatIntervalPanel.addClass('hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\t\tthis.$repeatIntervalPanel.attr('aria-hidden', 'true');\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// hide all panels\n\t\t\tthis.$recurrencePanels.addClass('hidden');\n\t\t\tthis.$recurrencePanels.attr('aria-hidden', 'true');\n\n\t\t\t// show panel for current selection\n\t\t\tthis.$element.find('.repeat-' + val).removeClass('hide hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\tthis.$element.find('.repeat-' + val).attr('aria-hidden', 'false');\n\n\t\t\t// the end selection should only be shown when\n\t\t\t// the repeat interval is not \"None (run once)\"\n\t\t\tif (val === 'none') {\n\t\t\t\tthis.$end.addClass('hidden');\n\t\t\t\tthis.$end.attr('aria-hidden', 'true');\n\t\t\t} else {\n\t\t\t\tthis.$end.removeClass('hide hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\tthis.$end.attr('aria-hidden', 'false');\n\t\t\t}\n\n\t\t\tthis._guessEndDate();\n\t\t},\n\n\t\t_parseAndSetRecurrencePattern: function(recurrencePattern, startTime) {\n\t\t\tvar recur = {};\n\t\t\tvar i = 0;\n\t\t\tvar item = '';\n\t\t\tvar commaPatternSplit;\n\n\t\t\tvar $repeatMonthlyDate, $repeatYearlyDate, $repeatYearlyDay;\n\n\t\t\tvar semiColonPatternSplit = recurrencePattern.toUpperCase().split(';');\n\t\t\tfor (i = 0; i < semiColonPatternSplit.length; i++) {\n\t\t\t\tif (semiColonPatternSplit[i] !== '') {\n\t\t\t\t\titem = semiColonPatternSplit[i].split('=');\n\t\t\t\t\trecur[item[0]] = item[1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (recur.FREQ === 'DAILY') {\n\t\t\t\tif (recur.BYDAY === 'MO,TU,WE,TH,FR') {\n\t\t\t\t\titem = 'weekdays';\n\t\t\t\t} else {\n\t\t\t\t\tif (recur.INTERVAL === '1' && recur.COUNT === '1') {\n\t\t\t\t\t\titem = 'none';\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem = 'daily';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (recur.FREQ === 'SECONDLY') {\n\t\t\t\titem = 'secondly';\n\t\t\t} else if (recur.FREQ === 'MINUTELY') {\n\t\t\t\titem = 'minutely';\n\t\t\t} else if (recur.FREQ === 'HOURLY') {\n\t\t\t\titem = 'hourly';\n\t\t\t} else if (recur.FREQ === 'WEEKLY') {\n\t\t\t\titem = 'weekly';\n\n\t\t\t\tif (recur.BYDAY) {\n\t\t\t\t\tif (recur.BYDAY === 'MO,TU,WE,TH,FR') {\n\t\t\t\t\t\titem = 'weekdays';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar el = this.$element.find('.repeat-days-of-the-week .btn-group');\n\t\t\t\t\t\tel.find('label').removeClass('active');\n\t\t\t\t\t\tcommaPatternSplit = recur.BYDAY.split(',');\n\t\t\t\t\t\tfor (i = 0; i < commaPatternSplit.length; i++) {\n\t\t\t\t\t\t\tel.find('input[data-value=\"' + commaPatternSplit[i] + '\"]').prop('checked',true).parent().addClass('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (recur.FREQ === 'MONTHLY') {\n\t\t\t\tthis.$element.find('.repeat-monthly input').removeAttr('checked').removeClass('checked');\n\t\t\t\tthis.$element.find('.repeat-monthly label.radio-custom').removeClass('checked');\n\t\t\t\tif (recur.BYMONTHDAY) {\n\t\t\t\t\t$repeatMonthlyDate = this.$element.find('.repeat-monthly-date');\n\t\t\t\t\t$repeatMonthlyDate.find('input').addClass('checked').prop('checked', true);\n\t\t\t\t\t$repeatMonthlyDate.find('label.radio-custom').addClass('checked');\n\t\t\t\t\t$repeatMonthlyDate.find('.selectlist').selectlist('selectByValue', recur.BYMONTHDAY);\n\t\t\t\t} else if (recur.BYDAY) {\n\t\t\t\t\tvar $repeatMonthlyDay = this.$element.find('.repeat-monthly-day');\n\t\t\t\t\t$repeatMonthlyDay.find('input').addClass('checked').prop('checked', true);\n\t\t\t\t\t$repeatMonthlyDay.find('label.radio-custom').addClass('checked');\n\t\t\t\t\tif (recur.BYSETPOS) {\n\t\t\t\t\t\t$repeatMonthlyDay.find('.month-day-pos').selectlist('selectByValue', recur.BYSETPOS);\n\t\t\t\t\t}\n\n\t\t\t\t\t$repeatMonthlyDay.find('.month-days').selectlist('selectByValue', recur.BYDAY);\n\t\t\t\t}\n\n\t\t\t\titem = 'monthly';\n\t\t\t} else if (recur.FREQ === 'YEARLY') {\n\t\t\t\tthis.$element.find('.repeat-yearly input').removeAttr('checked').removeClass('checked');\n\t\t\t\tthis.$element.find('.repeat-yearly label.radio-custom').removeClass('checked');\n\t\t\t\tif (recur.BYMONTHDAY) {\n\t\t\t\t\t$repeatYearlyDate = this.$element.find('.repeat-yearly-date');\n\t\t\t\t\t$repeatYearlyDate.find('input').addClass('checked').prop('checked', true);\n\t\t\t\t\t$repeatYearlyDate.find('label.radio-custom').addClass('checked');\n\t\t\t\t\tif (recur.BYMONTH) {\n\t\t\t\t\t\t$repeatYearlyDate.find('.year-month').selectlist('selectByValue', recur.BYMONTH);\n\t\t\t\t\t}\n\n\t\t\t\t\t$repeatYearlyDate.find('.year-month-day').selectlist('selectByValue', recur.BYMONTHDAY);\n\t\t\t\t} else if (recur.BYSETPOS) {\n\t\t\t\t\t$repeatYearlyDay = this.$element.find('.repeat-yearly-day');\n\t\t\t\t\t$repeatYearlyDay.find('input').addClass('checked').prop('checked', true);\n\t\t\t\t\t$repeatYearlyDay.find('label.radio-custom').addClass('checked');\n\t\t\t\t\t$repeatYearlyDay.find('.year-month-day-pos').selectlist('selectByValue', recur.BYSETPOS);\n\n\t\t\t\t\tif (recur.BYDAY) {\n\t\t\t\t\t\t$repeatYearlyDay.find('.year-month-days').selectlist('selectByValue', recur.BYDAY);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (recur.BYMONTH) {\n\t\t\t\t\t\t$repeatYearlyDay.find('.year-month').selectlist('selectByValue', recur.BYMONTH);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titem = 'yearly';\n\t\t\t} else {\n\t\t\t\titem = 'none';\n\t\t\t}\n\n\t\t\tif (recur.COUNT) {\n\t\t\t\tthis.$endAfter.spinbox('value', parseInt(recur.COUNT, 10));\n\t\t\t\tthis.$endSelect.selectlist('selectByValue', 'after');\n\t\t\t} else if (recur.UNTIL) {\n\t\t\t\tvar untilSplit, untilDate;\n\n\t\t\t\tif (recur.UNTIL.length === 8) {\n\t\t\t\t\tuntilSplit = recur.UNTIL.split('');\n\t\t\t\t\tuntilSplit.splice(4, 0, '-');\n\t\t\t\t\tuntilSplit.splice(7, 0, '-');\n\t\t\t\t\tuntilDate = untilSplit.join('');\n\t\t\t\t}\n\n\t\t\t\tvar timeZone = this.$timeZone.selectlist('selectedItem');\n\t\t\t\tvar timezoneOffset = (timeZone.offset === '+00:00') ? 'Z' : timeZone.offset;\n\n\t\t\t\tvar utcEndHours = this.setUtcTime(untilDate, startTime.time24HourFormat, timezoneOffset);\n\t\t\t\tthis.$endDate.datepicker('setDate', utcEndHours);\n\n\t\t\t\tthis.$endSelect.selectlist('selectByValue', 'date');\n\t\t\t} else {\n\t\t\t\tthis.$endSelect.selectlist('selectByValue', 'never');\n\t\t\t}\n\n\t\t\tthis.endSelectChanged();\n\n\t\t\tif (recur.INTERVAL) {\n\t\t\t\tthis.$repeatIntervalSpinbox.spinbox('value', parseInt(recur.INTERVAL, 10));\n\t\t\t}\n\n\t\t\tthis.$repeatIntervalSelect.selectlist('selectByValue', item);\n\t\t\tthis.repeatIntervalSelectChanged();\n\t\t},\n\n\t\t_parseStartDateTime: function(startTimeISO8601) {\n\t\t\tvar startTime = {};\n\t\t\tvar startDate, startDateTimeISO8601FormatSplit, hours, minutes, period;\n\n\t\t\tstartTime.time24HourFormat = startTimeISO8601.split('+')[0].split('-')[0];\n\n\t\t\tif (startTimeISO8601.search(/\\+/) > -1) {\n\t\t\t\tstartTime.timeZoneOffset = '+' + langx.trim(startTimeISO8601.split('+')[1]);\n\t\t\t} else if (startTimeISO8601.search(/\\-/) > -1) {\n\t\t\t\tstartTime.timeZoneOffset = '-' + langx.trim(startTimeISO8601.split('-')[1]);\n\t\t\t} else {\n\t\t\t\tstartTime.timeZoneOffset = '+00:00';\n\t\t\t}\n\n\t\t\tstartTime.time24HourFormatSplit = startTime.time24HourFormat.split(':');\n\t\t\thours = parseInt(startTime.time24HourFormatSplit[0], 10);\n\t\t\tminutes = (startTime.time24HourFormatSplit[1]) ? parseInt(startTime.time24HourFormatSplit[1].split('+')[0].split('-')[0].split('Z')[0], 10) : 0;\n\t\t\tperiod = (hours < 12) ? 'AM' : 'PM';\n\n\t\t\tif (hours === 0) {\n\t\t\t\thours = 12;\n\t\t\t} else if (hours > 12) {\n\t\t\t\thours -= 12;\n\t\t\t}\n\n\t\t\tminutes = (minutes < 10) ? '0' + minutes : minutes;\n\t\t\tstartTime.time12HourFormat = hours + ':' + minutes;\n\t\t\tstartTime.time12HourFormatWithPeriod = hours + ':' + minutes + ' ' + period;\n\n\t\t\treturn startTime;\n\t\t},\n\n\t\t_parseTimeZone: function(options, startTime) {\n\t\t\tstartTime.timeZoneQuerySelector = '';\n\t\t\tif (options.timeZone) {\n\t\t\t\tif (typeof (options.timeZone) === 'string') {\n\t\t\t\t\tstartTime.timeZoneQuerySelector += 'li[data-name=\"' + options.timeZone + '\"]';\n\t\t\t\t} else {\n\t\t\t\t\tlangx.each(options.timeZone, function(key, value) {\n\t\t\t\t\t\tstartTime.timeZoneQuerySelector += 'li[data-' + key + '=\"' + value + '\"]';\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tstartTime.timeZoneOffset = options.timeZone.offset;\n\t\t\t} else if (options.startDateTime) {\n\t\t\t\t// Time zone has not been specified via options object, therefore use the timeZoneOffset from _parseAndSetStartDateTime\n\t\t\t\tstartTime.timeZoneOffset = (startTime.timeZoneOffset === '+00:00') ? 'Z' : startTime.timeZoneOffset;\n\t\t\t\tstartTime.timeZoneQuerySelector += 'li[data-offset=\"' + startTime.timeZoneOffset + '\"]';\n\t\t\t} else {\n\t\t\t\tstartTime.timeZoneOffset = 'Z';\n\t\t\t}\n\n\t\t\treturn startTime.timeZoneOffset;\n\t\t},\n\n\t\t_setTimeUI: function(time12HourFormatWithPeriod) {\n\t\t\tthis.$startTime.find('input').val(time12HourFormatWithPeriod);\n\t\t\tthis.$startTime.combobox('selectByText', time12HourFormatWithPeriod);\n\t\t},\n\n\t\t_setTimeZoneUI: function(querySelector) {\n\t\t\tthis.$timeZone.selectlist('selectBySelector', querySelector);\n\t\t},\n\n\t\tsetValue: function setValue(options) {\n\t\t\tvar startTime = {};\n\t\t\tvar startDateTime, startDate, startTimeISO8601, timeOffset, utcStartHours;\n\n\t\t\t// TIME\n\t\t\tif (options.startDateTime) {\n\t\t\t\tstartDateTime = options.startDateTime.split('T');\n\t\t\t\tstartDate = startDateTime[0];\n\t\t\t\tstartTimeISO8601 = startDateTime[1];\n\n\t\t\t\tif(startTimeISO8601) {\n\t\t\t\t\tstartTime = this._parseStartDateTime(startTimeISO8601);\n\t\t\t\t\tthis._setTimeUI(startTime.time12HourFormatWithPeriod);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tstartTime.time12HourFormat = '00:00';\n\t\t\t\t\tstartTime.time24HourFormat = '00:00';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstartTime.time12HourFormat = '00:00';\n\t\t\t\tstartTime.time24HourFormat = '00:00';\n\t\t\t\tvar currentDate = this.$startDate.datepicker('getDate');\n\t\t\t\tstartDate = currentDate.getFullYear() + '-' + currentDate.getMonth() + '-' + currentDate.getDate();\n\t\t\t}\n\n\t\t\t// TIMEZONE\n\t\t\tthis._parseTimeZone(options, startTime);\n\t\t\tif (startTime.timeZoneQuerySelector) {\n\t\t\t\tthis._setTimeZoneUI(startTime.timeZoneQuerySelector);\n\t\t\t}\n\n\t\t\t// RECURRENCE PATTERN\n\t\t\tif(options.recurrencePattern) {\n\t\t\t\tthis._parseAndSetRecurrencePattern(options.recurrencePattern, startTime);\n\t\t\t}\n\n\t\t\tutcStartHours = this.setUtcTime(startDate, startTime.time24HourFormat, startTime.timeZoneOffset);\n\t\t\tthis.$startDate.datepicker('setDate', utcStartHours);\n\t\t},\n\n\t\ttoggleState: function toggleState(action) {\n\t\t\tthis.$element.find('.combobox').combobox(action);\n\t\t\tthis.$element.find('.datepicker').datepicker(action);\n\t\t\tthis.$element.find('.selectlist').selectlist(action);\n\t\t\tthis.$element.find('.spinbox').spinbox(action);\n\t\t\tthis.$element.find('.radio-custom').radio(action);\n\n\t\t\tif (action === 'disable') {\n\t\t\t\taction = 'addClass';\n\t\t\t} else {\n\t\t\t\taction = 'removeClass';\n\t\t\t}\n\n\t\t\tthis.$element.find('.repeat-days-of-the-week .btn-group')[action]('disabled');\n\t\t},\n\n\t\tvalue: function value(options) {\n\t\t\tif (options) {\n\t\t\t\treturn this.setValue(options);\n\t\t\t} else {\n\t\t\t\treturn this.getValue();\n\t\t\t}\n\t\t}\n\n\t});\n\n\tvar _getFormattedDate = function _getFormattedDate(dateObj, dash) {\n\t\tvar fdate = '';\n\t\tvar item;\n\n\t\tfdate += dateObj.getFullYear();\n\t\tfdate += dash;\n\t\titem = dateObj.getMonth() + 1;//because 0 indexing makes sense when dealing with months /sarcasm\n\t\tfdate += (item < 10) ? '0' + item : item;\n\t\tfdate += dash;\n\t\titem = dateObj.getDate();\n\t\tfdate += (item < 10) ? '0' + item : item;\n\n\t\treturn fdate;\n\t};\n\n\tvar ONE_SECOND = 1000;\n\tvar ONE_MINUTE = ONE_SECOND * 60;\n\tvar ONE_HOUR = ONE_MINUTE * 60;\n\tvar ONE_DAY = ONE_HOUR * 24;\n\tvar ONE_WEEK = ONE_DAY * 7;\n\tvar ONE_MONTH = ONE_WEEK * 5;// No good way to increment by one month using vanilla JS. Since this is an end date, we only need to ensure that this date occurs after at least one or more repeat increments, but there is no reason for it to be exact.\n\tvar ONE_YEAR = ONE_WEEK * 52;\n\tvar INTERVALS = {\n\t\tsecondly: ONE_SECOND,\n\t\tminutely: ONE_MINUTE,\n\t\thourly: ONE_HOUR,\n\t\tdaily: ONE_DAY,\n\t\tweekly: ONE_WEEK,\n\t\tmonthly: ONE_MONTH,\n\t\tyearly: ONE_YEAR\n\t};\n\n\tvar _incrementDate = function _incrementDate(start, end, interval, increment) {\n\t\treturn new Date(start.getTime() + (INTERVALS[interval] * increment));\n\t};\n\n\n\t// SCHEDULER PLUGIN DEFINITION\n\n\t$.fn.scheduler = function scheduler(option) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\tvar methodReturn;\n\n\t\tvar $set = this.each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar data = $this.data('fu.scheduler');\n\t\t\tvar options = typeof option === 'object' && option;\n\n\t\t\tif (!data) {\n\t\t\t\t$this.data('fu.scheduler', (data = new Scheduler(this, options)));\n\t\t\t}\n\n\t\t\tif (typeof option === 'string') {\n\t\t\t\tmethodReturn = data[option].apply(data, args);\n\t\t\t}\n\t\t});\n\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\n\t};\n\n\t$.fn.scheduler.defaults = {};\n\n\t$.fn.scheduler.Constructor = Scheduler;\n\n\t$.fn.scheduler.noConflict = function noConflict() {\n\t\t$.fn.scheduler = old;\n\t\treturn this;\n\t};\n\n\n\t// DATA-API\n\t/*\n\n\t$(document).on('mousedown.fu.scheduler.data-api', '[data-initialize=scheduler]', function (e) {\n\t\tvar $control = $(e.target).closest('.scheduler');\n\t\tif (!$control.data('fu.scheduler')) {\n\t\t\t$control.scheduler($control.data());\n\t\t}\n\t});\n\n\t// Must be domReady for AMD compatibility\n\t$(function () {\n\t\t$('[data-initialize=scheduler]').each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tif ($this.data('scheduler')) return;\n\t\t\t$this.scheduler($this.data());\n\t\t});\n\t});\n\t*/\n\n\treturn $.fn.scheduler;\n});\n"]}