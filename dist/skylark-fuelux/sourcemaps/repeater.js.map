{"version":3,"sources":["repeater.js"],"names":["define","skylark","langx","browser","eventer","noder","geom","$","fuelux","old","fn","repeater","Repeater","WidgetBase","inherit","klassName","init","element","options","$btn","currentView","self","this","$element","$canvas","find","$count","$end","$filters","$loader","$pageSize","$nextBtn","$pages","$prevBtn","$primaryPaging","$search","$secondaryPaging","$start","$viewport","$views","on","e","dropdown","currentPage","isDisabled","infiniteScrollingCallback","infiniteScrollingCont","infiniteScrollingEnabled","infiniteScrollingEnd","infiniteScrollingOptions","lastPageInput","mixin","defaults","pageIncrement","resizeTimeout","stamp","Date","getTime","Math","floor","random","storedDataSourceOpts","syncingViewButtonState","viewOptions","viewType","selectlist","combobox","search","searchOnKeyPress","allowCancel","value","trigger","render","clearInfinite","proxy","next","previous","evt","data","pageInputChange","text","val","keyCode","viewChanged","window","clearTimeout","setTimeout","resize","loader","defaultView","length","setViewOptions","initViewTypes","changeView","clear","opts","preserve","scan","empty","undefined","viewTypeObj","viewTypes","cleared","call","clearPreservedDataSourceOptions","destroy","markup","each","attr","outerHTML","infinitescroll","remove","off","disable","addClass","enabled","status","enable","removeClass","removeAttr","hasClass","parseInt","html","getDataOptions","dataSourceOptions","preserveDataSourceOptions","returnOptions","view","pageIndex","filter","pageSize","searchValue","addViewTypeData","dataOptions","infiniteScrolling","footer","viewport","end","dataSource","css","height","outerHeight","hide","cont","show","infiniteScrollPaging","page","pages","NaN","initInfiniteScrolling","helpers","callback","key","hasOwnProperty","push","initViewType","itemization","count","start","dataFromCombobox","pageInc","pagination","totalPages","currenPageOutput","dropPagingCap","dropMenu","i","l","append","is","focus","prevView","split","selected","syncViewButtonState","beforeRender","repeaterPrototypeContext","dataSourceReturnedData","doRender","viewportMargins","currentHiddenElement","staticHeight","scrubbedElements","previousProperties","$hiddenElements","parentsUntil","currentElementIndex","style","bottom","top","staticHeightValue","headerHeight","footerHeight","bottomMargin","topMargin","width","outerWidth","forEach","renderItems","container","before","addBefore","addItem","$dataContainer","$container","renderItem","subset","objectAndPropsToRepeatOnString","repeat","objectAndPropsToRepeatOn","objectToRepeatOn","propsToRepeatOn","slice","prop","logWarn","subItemIndex","addSubItem","index","after","addAfter","curView","viewName","views","$selected","target","parents","$itemToCheck","msg","console","warn","keep","children","item","pres","detach","$parent","response","action","callNextInit","currentViewType","nextViewType","currentViewtype","initialize","afterRender","state","renderOptions","d","prototype","runRenderer","option","methodReturn","args","Array","arguments","$set","$this","apply","items","Constructor","noConflict"],"mappings":"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","file":"../repeater.js","sourcesContent":["define([\r\n  \"skylark-utils-dom/skylark\",\r\n  \"skylark-langx/langx\",\r\n  \"skylark-utils-dom/browser\",\r\n  \"skylark-utils-dom/eventer\",\r\n  \"skylark-utils-dom/noder\",\r\n  \"skylark-utils-dom/geom\",\r\n  \"skylark-utils-dom/query\",\r\n  \"./fuelux\",\r\n  \"./loader\",\r\n  \"./selectlist\",\r\n  \"./combobox\"  \r\n],function(skylark,langx,browser,eventer,noder,geom,$,fuelux){\r\n\r\n\t/*\r\n\t * Repeater\r\n\t * https://github.com/ExactTarget/fuelux\r\n\t *\r\n\t * Copyright (c) 2014 ExactTarget\r\n\t * Licensed under the BSD New license.\r\n\t */\r\n\r\n\tvar old = $.fn.repeater;\r\n\r\n\t// REPEATER CONSTRUCTOR AND PROTOTYPE\r\n\r\n\tvar Repeater = fuelux.Repeater = fuelux.WidgetBase.inherit({\r\n\t\tklassName: \"Repeater\",\r\n\r\n\t\tinit : function(element,options) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar $btn;\r\n\t\t\tvar currentView;\r\n\r\n\t\t\tthis.$element = $(element);\r\n\r\n\t\t\tthis.$canvas = this.$element.find('.repeater-canvas');\r\n\t\t\tthis.$count = this.$element.find('.repeater-count');\r\n\t\t\tthis.$end = this.$element.find('.repeater-end');\r\n\t\t\tthis.$filters = this.$element.find('.repeater-filters');\r\n\t\t\tthis.$loader = this.$element.find('.repeater-loader');\r\n\t\t\tthis.$pageSize = this.$element.find('.repeater-itemization .selectlist');\r\n\t\t\tthis.$nextBtn = this.$element.find('.repeater-next');\r\n\t\t\tthis.$pages = this.$element.find('.repeater-pages');\r\n\t\t\tthis.$prevBtn = this.$element.find('.repeater-prev');\r\n\t\t\tthis.$primaryPaging = this.$element.find('.repeater-primaryPaging');\r\n\t\t\tthis.$search = this.$element.find('.repeater-search').find('.search');\r\n\t\t\tthis.$secondaryPaging = this.$element.find('.repeater-secondaryPaging');\r\n\t\t\tthis.$start = this.$element.find('.repeater-start');\r\n\t\t\tthis.$viewport = this.$element.find('.repeater-viewport');\r\n\t\t\tthis.$views = this.$element.find('.repeater-views');\r\n\r\n\t\t\tthis.$element.on('mousedown.bs.dropdown.data-api', '[data-toggle=\"dropdown\"]',function(e) {\r\n\t\t\t\t$(this).dropdown();\r\n\t\t\t}); \r\n\r\n\t\t\tthis.currentPage = 0;\r\n\t\t\tthis.currentView = null;\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.infiniteScrollingCallback = function noop () {};\r\n\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\tthis.lastPageInput = 0;\r\n\t\t\tthis.options = langx.mixin({}, $.fn.repeater.defaults, options);\r\n\t\t\tthis.pageIncrement = 0;// store direction navigated\r\n\t\t\tthis.resizeTimeout = {};\r\n\t\t\tthis.stamp = new Date().getTime() + (Math.floor(Math.random() * 100) + 1);\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t\tthis.viewOptions = {};\r\n\t\t\tthis.viewType = null;\r\n\r\n\t\t\tthis.$filters.selectlist();\r\n\t\t\tthis.$pageSize.selectlist();\r\n\t\t\tthis.$primaryPaging.find('.combobox').combobox();\r\n\t\t\tthis.$search.search({\r\n\t\t\t\tsearchOnKeyPress: this.options.searchOnKeyPress,\r\n\t\t\t\tallowCancel: this.options.allowCancel\r\n\t\t\t});\r\n\r\n\t\t\tthis.$filters.on('changed.fu.selectlist', function onFiltersChanged (e, value) {\r\n\t\t\t\tself.$element.trigger('filtered.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$nextBtn.on('click.fu.repeater', langx.proxy(this.next, this));\r\n\t\t\tthis.$pageSize.on('changed.fu.selectlist', function onPageSizeChanged (e, value) {\r\n\t\t\t\tself.$element.trigger('pageSizeChanged.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$prevBtn.on('click.fu.repeater', langx.proxy(this.previous, this));\r\n\t\t\tthis.$primaryPaging.find('.combobox').on('changed.fu.combobox', function onPrimaryPagingChanged (evt, data) {\r\n\t\t\t\tself.pageInputChange(data.text, data);\r\n\t\t\t});\r\n\t\t\tthis.$search.on('searched.fu.search cleared.fu.search', function onSearched (e, value) {\r\n\t\t\t\tself.$element.trigger('searchChanged.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.$search.on('canceled.fu.search', function onSearchCanceled (e, value) {\r\n\t\t\t\tself.$element.trigger('canceled.fu.repeater', value);\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tclearInfinite: true,\r\n\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.$secondaryPaging.on('blur.fu.repeater', function onSecondaryPagingBlur () {\r\n\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t});\r\n\t\t\tthis.$secondaryPaging.on('keyup', function onSecondaryPagingKeyup (e) {\r\n\t\t\t\tif (e.keyCode === 13) {\r\n\t\t\t\t\tself.pageInputChange(self.$secondaryPaging.val());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$views.find('input').on('change.fu.repeater', langx.proxy(this.viewChanged, this));\r\n\r\n\t\t\t$(window).on('resize.fu.repeater.' + this.stamp, function onResizeRepeater () {\r\n\t\t\t\tclearTimeout(self.resizeTimeout);\r\n\t\t\t\tself.resizeTimeout = setTimeout(function resizeTimeout () {\r\n\t\t\t\t\tself.resize();\r\n\t\t\t\t\tself.$element.trigger('resized.fu.repeater');\r\n\t\t\t\t}, 75);\r\n\t\t\t});\r\n\r\n\t\t\tthis.$loader.loader();\r\n\t\t\tthis.$loader.loader('pause');\r\n\t\t\tif (this.options.defaultView !== -1) {\r\n\t\t\t\tcurrentView = this.options.defaultView;\r\n\t\t\t} else {\r\n\t\t\t\t$btn = this.$views.find('label.active input');\r\n\t\t\t\tcurrentView = ($btn.length > 0) ? $btn.val() : 'list';\r\n\t\t\t}\r\n\r\n\t\t\tthis.setViewOptions(currentView);\r\n\r\n\t\t\tthis.initViewTypes(function initViewTypes () {\r\n\t\t\t\tself.resize();\r\n\t\t\t\tself.$element.trigger('resized.fu.repeater');\r\n\t\t\t\tself.render({\r\n\t\t\t\t\tchangeView: currentView\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tclear: function clear (opts) {\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (!options.preserve) {\r\n\t\t\t\t// Just trash everything because preserve is false\r\n\t\t\t\tthis.$canvas.empty();\r\n\t\t\t} else if (!this.infiniteScrollingEnabled || options.clearInfinite) {\r\n\t\t\t\t// Preserve clear only if infiniteScrolling is disabled or if specifically told to do so\r\n\t\t\t\tscan(this.$canvas);\r\n\t\t\t} // Otherwise don't clear because infiniteScrolling is enabled\r\n\r\n\t\t\t// If viewChanged and current viewTypeObj has a cleared function, call it\r\n\t\t\tvar viewChanged = (options.viewChanged !== undefined) ? options.viewChanged : false;\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tif (!viewChanged && viewTypeObj.cleared) {\r\n\t\t\t\tviewTypeObj.cleared.call(this, {\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclearPreservedDataSourceOptions: function clearPreservedDataSourceOptions () {\r\n\t\t\tthis.storedDataSourceOpts = null;\r\n\t\t},\r\n\r\n\t\tdestroy: function destroy () {\r\n\t\t\tvar markup;\r\n\t\t\t// set input value attrbute in markup\r\n\t\t\tthis.$element.find('input').each(function eachInput () {\r\n\t\t\t\t$(this).attr('value', $(this).val());\r\n\t\t\t});\r\n\r\n\t\t\t// empty elements to return to original markup\r\n\t\t\tthis.$canvas.empty();\r\n\t\t\tmarkup = this.$element[0].outerHTML;\r\n\r\n\t\t\t// destroy components and remove leftover\r\n\t\t\tthis.$element.find('.combobox').combobox('destroy');\r\n\t\t\tthis.$element.find('.selectlist').selectlist('destroy');\r\n\t\t\tthis.$element.find('.search').search('destroy');\r\n\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t$(this.infiniteScrollingCont).infinitescroll('destroy');\r\n\t\t\t}\r\n\r\n\t\t\tthis.$element.remove();\r\n\r\n\t\t\t// any external events\r\n\t\t\t$(window).off('resize.fu.repeater.' + this.stamp);\r\n\r\n\t\t\treturn markup;\r\n\t\t},\r\n\r\n\t\tdisable: function disable () {\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\r\n\t\t\tthis.$search.search('disable');\r\n\t\t\tthis.$filters.selectlist('disable');\r\n\t\t\tthis.$views.find('label, input').addClass('disabled').attr('disabled', 'disabled');\r\n\t\t\tthis.$pageSize.selectlist('disable');\r\n\t\t\tthis.$primaryPaging.find('.combobox').combobox('disable');\r\n\t\t\tthis.$secondaryPaging.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\r\n\t\t\tif (viewTypeObj.enabled) {\r\n\t\t\t\tviewTypeObj.enabled.call(this, {\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = true;\r\n\t\t\tthis.$element.addClass('disabled');\r\n\t\t\tthis.$element.trigger('disabled.fu.repeater');\r\n\t\t},\r\n\r\n\t\tenable: function enable () {\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\r\n\t\t\tthis.$search.search('enable');\r\n\t\t\tthis.$filters.selectlist('enable');\r\n\t\t\tthis.$views.find('label, input').removeClass('disabled').removeAttr('disabled');\r\n\t\t\tthis.$pageSize.selectlist('enable');\r\n\t\t\tthis.$primaryPaging.find('.combobox').combobox('enable');\r\n\t\t\tthis.$secondaryPaging.removeAttr('disabled');\r\n\r\n\t\t\tif (!this.$prevBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\t\t\tif (!this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t}\r\n\r\n\t\t\t// is 0 or 1 pages, if using $primaryPaging (combobox)\r\n\t\t\t// if using selectlist allow user to use selectlist to select 0 or 1\r\n\t\t\tif (this.$prevBtn.hasClass('page-end') && this.$nextBtn.hasClass('page-end')) {\r\n\t\t\t\tthis.$primaryPaging.combobox('disable');\r\n\t\t\t}\r\n\r\n\t\t\t// if there are no items\r\n\t\t\tif (parseInt(this.$count.html(), 10) !== 0) {\r\n\t\t\t\tthis.$pageSize.selectlist('enable');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$pageSize.selectlist('disable');\r\n\t\t\t}\r\n\r\n\t\t\tif (viewTypeObj.enabled) {\r\n\t\t\t\tviewTypeObj.enabled.call(this, {\r\n\t\t\t\t\tstatus: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.isDisabled = false;\r\n\t\t\tthis.$element.removeClass('disabled');\r\n\t\t\tthis.$element.trigger('enabled.fu.repeater');\r\n\t\t},\r\n\r\n\t\tgetDataOptions: function getDataOptions (opts) {\r\n\t\t\tvar options = opts || {};\r\n\t\t\tif (options.pageIncrement !== undefined) {\r\n\t\t\t\tif (options.pageIncrement === null) {\r\n\t\t\t\t\tthis.currentPage = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.currentPage += options.pageIncrement;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar dataSourceOptions = {};\r\n\t\t\tif (options.dataSourceOptions) {\r\n\t\t\t\tdataSourceOptions = options.dataSourceOptions;\r\n\r\n\t\t\t\tif (options.preserveDataSourceOptions) {\r\n\t\t\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.storedDataSourceOpts = dataSourceOptions;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.storedDataSourceOpts) {\r\n\t\t\t\tdataSourceOptions = langx.mixin(this.storedDataSourceOpts, dataSourceOptions);\r\n\t\t\t}\r\n\r\n\t\t\tvar returnOptions = {\r\n\t\t\t\tview: this.currentView,\r\n\t\t\t\tpageIndex: this.currentPage,\r\n\t\t\t\tfilter: {\r\n\t\t\t\t\ttext: 'All',\r\n\t\t\t\t\tvalue: 'all'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (this.$filters.length > 0) {\r\n\t\t\t\treturnOptions.filter = this.$filters.selectlist('selectedItem');\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled) {\r\n\t\t\t\treturnOptions.pageSize = 25;\r\n\r\n\t\t\t\tif (this.$pageSize.length > 0) {\r\n\t\t\t\t\treturnOptions.pageSize = parseInt(this.$pageSize.selectlist('selectedItem').value, 10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar searchValue = this.$search && this.$search.find('input') && this.$search.find('input').val();\r\n\t\t\tif (searchValue !== '') {\r\n\t\t\t\treturnOptions.search = searchValue;\r\n\t\t\t}\r\n\r\n\t\t\tvar viewType = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar addViewTypeData = viewType.dataOptions;\r\n\t\t\tif (addViewTypeData) {\r\n\t\t\t\treturnOptions = addViewTypeData.call(this, returnOptions);\r\n\t\t\t}\r\n\r\n\t\t\treturnOptions = langx.mixin(returnOptions, dataSourceOptions);\r\n\r\n\t\t\treturn returnOptions;\r\n\t\t},\r\n\r\n\t\tinfiniteScrolling: function infiniteScrolling (enable, opts) {\r\n\t\t\tvar footer = this.$element.find('.repeater-footer');\r\n\t\t\tvar viewport = this.$element.find('.repeater-viewport');\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (enable) {\r\n\t\t\t\tthis.infiniteScrollingEnabled = true;\r\n\t\t\t\tthis.infiniteScrollingEnd = options.end;\r\n\t\t\t\tdelete options.dataSource;\r\n\t\t\t\tdelete options.end;\r\n\t\t\t\tthis.infiniteScrollingOptions = options;\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() + footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.hide();\r\n\t\t\t} else {\r\n\t\t\t\tvar cont = this.infiniteScrollingCont;\r\n\t\t\t\tvar data = cont.data();\r\n\t\t\t\tdelete data.infinitescroll;\r\n\t\t\t\tcont.off('scroll');\r\n\t\t\t\tcont.removeClass('infinitescroll');\r\n\r\n\t\t\t\tthis.infiniteScrollingCont = null;\r\n\t\t\t\tthis.infiniteScrollingEnabled = false;\r\n\t\t\t\tthis.infiniteScrollingEnd = null;\r\n\t\t\t\tthis.infiniteScrollingOptions = {};\r\n\t\t\t\tviewport.css({\r\n\t\t\t\t\theight: viewport.height() - footer.outerHeight()\r\n\t\t\t\t});\r\n\t\t\t\tfooter.show();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinfiniteScrollPaging: function infiniteScrollPaging (data) {\r\n\t\t\tvar end = (this.infiniteScrollingEnd !== true) ? this.infiniteScrollingEnd : undefined;\r\n\t\t\tvar page = data.page;\r\n\t\t\tvar pages = data.pages;\r\n\r\n\t\t\tthis.currentPage = (page !== undefined) ? page : NaN;\r\n\r\n\t\t\tif (data.end === true || (this.currentPage + 1) >= pages) {\r\n\t\t\t\tthis.infiniteScrollingCont.infinitescroll('end', end);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitInfiniteScrolling: function initInfiniteScrolling () {\r\n\t\t\tvar cont = this.$canvas.find('[data-infinite=\"true\"]:first');\r\n\r\n\t\t\tcont = (cont.length < 1) ? this.$canvas : cont;\r\n\t\t\tif (cont.data('fu.infinitescroll')) {\r\n\t\t\t\tcont.infinitescroll('enable');\r\n\t\t\t} else {\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar opts = langx.mixin({}, this.infiniteScrollingOptions);\r\n\t\t\t\topts.dataSource = function dataSource (helpers, callback) {\r\n\t\t\t\t\tself.infiniteScrollingCallback = callback;\r\n\t\t\t\t\tself.render({\r\n\t\t\t\t\t\tpageIncrement: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\tcont.infinitescroll(opts);\r\n\t\t\t\tthis.infiniteScrollingCont = cont;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinitViewTypes: function initViewTypes (callback) {\r\n\t\t\tvar viewTypes = [];\r\n\r\n\t\t\tfor (var key in $.fn.repeater.viewTypes) {\r\n\t\t\t\tif ({}.hasOwnProperty.call($.fn.repeater.viewTypes, key)) {\r\n\t\t\t\t\tviewTypes.push($.fn.repeater.viewTypes[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (viewTypes.length > 0) {\r\n\t\t\t\tinitViewType.call(this, 0, viewTypes, callback);\r\n\t\t\t} else {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\titemization: function itemization (data) {\r\n\t\t\tthis.$count.html((data.count !== undefined) ? data.count : '?');\r\n\t\t\tthis.$end.html((data.end !== undefined) ? data.end : '?');\r\n\t\t\tthis.$start.html((data.start !== undefined) ? data.start : '?');\r\n\t\t},\r\n\r\n\t\tnext: function next () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = 1;\r\n\t\t\tthis.$element.trigger('nextClicked.fu.repeater');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tpageInputChange: function pageInputChange (val, dataFromCombobox) {\r\n\t\t\t// dataFromCombobox is a proxy for data from combobox's changed event,\r\n\t\t\t// if no combobox is present data will be undefined\r\n\t\t\tvar pageInc;\r\n\t\t\tif (val !== this.lastPageInput) {\r\n\t\t\t\tthis.lastPageInput = val;\r\n\t\t\t\tvar value = parseInt(val, 10) - 1;\r\n\t\t\t\tpageInc = value - this.currentPage;\r\n\t\t\t\tthis.$element.trigger('pageChanged.fu.repeater', [value, dataFromCombobox]);\r\n\t\t\t\tthis.render({\r\n\t\t\t\t\tpageIncrement: pageInc\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tpagination: function pagination (data) {\r\n\t\t\tthis.$primaryPaging.removeClass('active');\r\n\t\t\tthis.$secondaryPaging.removeClass('active');\r\n\r\n\t\t\tvar totalPages = data.pages;\r\n\t\t\tthis.currentPage = (data.page !== undefined) ? data.page : NaN;\r\n\t\t\t// set paging to 0 if total pages is 0, otherwise use one-based index\r\n\t\t\tvar currenPageOutput = totalPages === 0 ? 0 : this.currentPage + 1;\r\n\r\n\t\t\tif (totalPages <= this.viewOptions.dropPagingCap) {\r\n\t\t\t\tthis.$primaryPaging.addClass('active');\r\n\t\t\t\tvar dropMenu = this.$primaryPaging.find('.dropdown-menu');\r\n\t\t\t\tdropMenu.empty();\r\n\t\t\t\tfor (var i = 0; i < totalPages; i++) {\r\n\t\t\t\t\tvar l = i + 1;\r\n\t\t\t\t\tdropMenu.append('<li data-value=\"' + l + '\"><a href=\"#\">' + l + '</a></li>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$primaryPaging.find('input.form-control').val(currenPageOutput);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$secondaryPaging.addClass('active');\r\n\t\t\t\tthis.$secondaryPaging.val(currenPageOutput);\r\n\t\t\t}\r\n\r\n\t\t\tthis.lastPageInput = this.currentPage + 1 + '';\r\n\r\n\t\t\tthis.$pages.html('' + totalPages);\r\n\r\n\t\t\t// this is not the last page\r\n\t\t\tif ((this.currentPage + 1) < totalPages) {\r\n\t\t\t\tthis.$nextBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$nextBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$nextBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// this is not the first page\r\n\t\t\tif ((this.currentPage - 1) >= 0) {\r\n\t\t\t\tthis.$prevBtn.removeAttr('disabled');\r\n\t\t\t\tthis.$prevBtn.removeClass('page-end');\r\n\t\t\t} else {\r\n\t\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\t\tthis.$prevBtn.addClass('page-end');\r\n\t\t\t}\r\n\r\n\t\t\t// return focus to next/previous buttons after navigating\r\n\t\t\tif (this.pageIncrement !== 0) {\r\n\t\t\t\tif (this.pageIncrement > 0) {\r\n\t\t\t\t\tif (this.$nextBtn.is(':disabled')) {\r\n\t\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.$prevBtn.is(':disabled')) {\r\n\t\t\t\t\t// if you can't focus, go the other way\r\n\t\t\t\t\tthis.$nextBtn.focus();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$prevBtn.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tprevious: function previous () {\r\n\t\t\tthis.$nextBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.$prevBtn.attr('disabled', 'disabled');\r\n\t\t\tthis.pageIncrement = -1;\r\n\t\t\tthis.$element.trigger('previousClicked.fu.repeater');\r\n\t\t\tthis.render({\r\n\t\t\t\tpageIncrement: this.pageIncrement\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// This functions more as a \"pre-render\" than a true \"render\"\r\n\t\trender: function render (opts) {\r\n\t\t\tthis.disable();\r\n\r\n\t\t\tvar viewChanged = false;\r\n\t\t\tvar viewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\tvar options = opts || {};\r\n\r\n\t\t\tif (options.changeView && (this.currentView !== options.changeView)) {\r\n\t\t\t\tvar prevView = this.currentView;\r\n\t\t\t\tthis.currentView = options.changeView;\r\n\t\t\t\tthis.viewType = this.currentView.split('.')[0];\r\n\t\t\t\tthis.setViewOptions(this.currentView);\r\n\t\t\t\tthis.$element.attr('data-currentview', this.currentView);\r\n\t\t\t\tthis.$element.attr('data-viewtype', this.viewType);\r\n\t\t\t\tviewChanged = true;\r\n\t\t\t\toptions.viewChanged = viewChanged;\r\n\r\n\t\t\t\tthis.$element.trigger('viewChanged.fu.repeater', this.currentView);\r\n\r\n\t\t\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t\t\tthis.infiniteScrolling(false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tviewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\t\tif (viewTypeObj.selected) {\r\n\t\t\t\t\tviewTypeObj.selected.call(this, {\r\n\t\t\t\t\t\tprevView: prevView\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.syncViewButtonState();\r\n\r\n\t\t\toptions.preserve = (options.preserve !== undefined) ? options.preserve : !viewChanged;\r\n\t\t\tthis.clear(options);\r\n\r\n\t\t\tif (!this.infiniteScrollingEnabled || (this.infiniteScrollingEnabled && viewChanged)) {\r\n\t\t\t\tthis.$loader.show().loader('play');\r\n\t\t\t}\r\n\r\n\t\t\tvar dataOptions = this.getDataOptions(options);\r\n\r\n\t\t\tvar beforeRender = this.viewOptions.dataSource;\r\n\t\t\tvar repeaterPrototypeContext = this;\r\n\t\t\tbeforeRender(\r\n\t\t\t\tdataOptions,\r\n\t\t\t\t// this serves as a bridge function to pass all required data through to the actual function\r\n\t\t\t\t// that does the rendering for us.\r\n\t\t\t\tfunction callDoRender (dataSourceReturnedData) {\r\n\t\t\t\t\tdoRender.call(\r\n\t\t\t\t\t\trepeaterPrototypeContext,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdata: dataSourceReturnedData,\r\n\t\t\t\t\t\t\tdataOptions: dataOptions,\r\n\t\t\t\t\t\t\toptions: options,\r\n\t\t\t\t\t\t\tviewChanged: viewChanged,\r\n\t\t\t\t\t\t\tviewTypeObj: viewTypeObj\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tresize: function resize () {\r\n\t\t\tvar staticHeight = (this.viewOptions.staticHeight === -1) ? this.$element.attr('data-staticheight') : this.viewOptions.staticHeight;\r\n\t\t\tvar viewTypeObj = {};\r\n\t\t\tvar height;\r\n\t\t\tvar viewportMargins;\r\n\t\t\tvar scrubbedElements = [];\r\n\t\t\tvar previousProperties = [];\r\n\t\t\t//var $hiddenElements = this.$element.parentsUntil(':visible').addBack(); // del addBack() not supported by skyalrk\r\n\t\t\tvar $hiddenElements = this.$element.parentsUntil(':visible');\r\n\t\t\tvar currentHiddenElement;\r\n\t\t\tvar currentElementIndex = 0;\r\n\r\n\t\t\t// Set parents to 'display:block' until repeater is visible again\r\n\t\t\twhile (currentElementIndex < $hiddenElements.length && this.$element.is(':hidden')) {\r\n\t\t\t\tcurrentHiddenElement = $hiddenElements[currentElementIndex];\r\n\t\t\t\t// Only set display property on elements that are explicitly hidden (i.e. do not inherit it from their parent)\r\n\t\t\t\tif ($(currentHiddenElement).is(':hidden')) {\r\n\t\t\t\t\tpreviousProperties.push(currentHiddenElement.style['display']);\r\n\t\t\t\t\tcurrentHiddenElement.style['display'] = 'block';\r\n\t\t\t\t\tscrubbedElements.push(currentHiddenElement);\r\n\t\t\t\t}\r\n\t\t\t\tcurrentElementIndex++;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.viewType) {\r\n\t\t\t\tviewTypeObj = $.fn.repeater.viewTypes[this.viewType] || {};\r\n\t\t\t}\r\n\r\n\t\t\tif (staticHeight !== undefined && staticHeight !== false && staticHeight !== 'false') {\r\n\t\t\t\tthis.$canvas.addClass('scrolling');\r\n\t\t\t\tviewportMargins = {\r\n\t\t\t\t\tbottom: this.$viewport.css('margin-bottom'),\r\n\t\t\t\t\ttop: this.$viewport.css('margin-top')\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar staticHeightValue = (staticHeight === 'true' || staticHeight === true) ? this.$element.height() : parseInt(staticHeight, 10);\r\n\t\t\t\tvar headerHeight = this.$element.find('.repeater-header').outerHeight();\r\n\t\t\t\tvar footerHeight = this.$element.find('.repeater-footer').outerHeight();\r\n\t\t\t\tvar bottomMargin = (viewportMargins.bottom === 'auto') ? 0 : parseInt(viewportMargins.bottom, 10);\r\n\t\t\t\tvar topMargin = (viewportMargins.top === 'auto') ? 0 : parseInt(viewportMargins.top, 10);\r\n\r\n\t\t\t\theight = staticHeightValue - headerHeight - footerHeight - bottomMargin - topMargin;\r\n\t\t\t\tthis.$viewport.outerHeight(height);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$canvas.removeClass('scrolling');\r\n\t\t\t}\r\n\r\n\t\t\tif (viewTypeObj.resize) {\r\n\t\t\t\tviewTypeObj.resize.call(this, {\r\n\t\t\t\t\theight: this.$element.outerHeight(),\r\n\t\t\t\t\twidth: this.$element.outerWidth()\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tscrubbedElements.forEach(function (element, i) {\r\n\t\t\t\telement.style['display'] = previousProperties[i];\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// e.g. \"Rows\" or \"Thumbnails\"\r\n\t\trenderItems: function renderItems (viewTypeObj, data, callback) {\r\n\t\t\tif (!viewTypeObj.render) {\r\n\t\t\t\tif (viewTypeObj.before) {\r\n\t\t\t\t\tvar addBefore = viewTypeObj.before.call(this, {\r\n\t\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t\taddItem(this.$canvas, addBefore);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar $dataContainer = this.$canvas.find('[data-container=\"true\"]:last');\r\n\t\t\t\tvar $container = ($dataContainer.length > 0) ? $dataContainer : this.$canvas;\r\n\r\n\t\t\t\t// It appears that the following code would theoretically allow you to pass a deeply\r\n\t\t\t\t// nested value to \"repeat on\" to be added to the repeater.\r\n\t\t\t\t// eg. `data.foo.bar.items`\r\n\t\t\t\tif (viewTypeObj.renderItem) {\r\n\t\t\t\t\tvar subset;\r\n\t\t\t\t\tvar objectAndPropsToRepeatOnString = viewTypeObj.repeat || 'data.items';\r\n\t\t\t\t\tvar objectAndPropsToRepeatOn = objectAndPropsToRepeatOnString.split('.');\r\n\t\t\t\t\tvar objectToRepeatOn = objectAndPropsToRepeatOn[0];\r\n\r\n\t\t\t\t\tif (objectToRepeatOn === 'data' || objectToRepeatOn === 'this') {\r\n\t\t\t\t\t\tsubset = (objectToRepeatOn === 'this') ? this : data;\r\n\r\n\t\t\t\t\t\t// Extracts subset from object chain (get `items` out of `foo.bar.items`). I think....\r\n\t\t\t\t\t\tvar propsToRepeatOn = objectAndPropsToRepeatOn.slice(1);\r\n\t\t\t\t\t\tfor (var prop = 0; prop < propsToRepeatOn.length; prop++) {\r\n\t\t\t\t\t\t\tif (subset[propsToRepeatOn[prop]] !== undefined) {\r\n\t\t\t\t\t\t\t\tsubset = subset[propsToRepeatOn[prop]];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsubset = [];\r\n\t\t\t\t\t\t\t\tlogWarn('WARNING: Repeater unable to find property to iterate renderItem on.');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var subItemIndex = 0; subItemIndex < subset.length; subItemIndex++) {\r\n\t\t\t\t\t\t\tvar addSubItem = viewTypeObj.renderItem.call(this, {\r\n\t\t\t\t\t\t\t\tcontainer: $container,\r\n\t\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\t\tindex: subItemIndex,\r\n\t\t\t\t\t\t\t\tsubset: subset\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\taddItem($container, addSubItem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlogWarn('WARNING: Repeater plugin \"repeat\" value must start with either \"data\" or \"this\"');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (viewTypeObj.after) {\r\n\t\t\t\t\tvar addAfter = viewTypeObj.after.call(this, {\r\n\t\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t});\r\n\t\t\t\t\taddItem(this.$canvas, addAfter);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcallback(data);\r\n\t\t\t} else {\r\n\t\t\t\tviewTypeObj.render.call(this, {\r\n\t\t\t\t\tcontainer: this.$canvas,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t}, callback);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetViewOptions: function setViewOptions (curView) {\r\n\t\t\tvar opts = {};\r\n\t\t\tvar viewName = curView.split('.')[1];\r\n\r\n\t\t\tif (this.options.views) {\r\n\t\t\t\topts = this.options.views[viewName] || this.options.views[curView] || {};\r\n\t\t\t} else {\r\n\t\t\t\topts = {};\r\n\t\t\t}\r\n\r\n\t\t\tthis.viewOptions = langx.mixin({}, this.options, opts);\r\n\t\t},\r\n\r\n\t\tviewChanged: function viewChanged (e) {\r\n\t\t\tvar $selected = $(e.target);\r\n\t\t\tvar val = $selected.val();\r\n\r\n\t\t\tif (!this.syncingViewButtonState) {\r\n\t\t\t\tif (this.isDisabled || $selected.parents('label:first').hasClass('disabled')) {\r\n\t\t\t\t\tthis.syncViewButtonState();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render({\r\n\t\t\t\t\t\tchangeView: val,\r\n\t\t\t\t\t\tpageIncrement: null\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsyncViewButtonState: function syncViewButtonState () {\r\n\t\t\tvar $itemToCheck = this.$views.find('input[value=\"' + this.currentView + '\"]');\r\n\r\n\t\t\tthis.syncingViewButtonState = true;\r\n\t\t\tthis.$views.find('input').prop('checked', false);\r\n\t\t\tthis.$views.find('label.active').removeClass('active');\r\n\r\n\t\t\tif ($itemToCheck.length > 0) {\r\n\t\t\t\t$itemToCheck.prop('checked', true);\r\n\t\t\t\t$itemToCheck.parents('label:first').addClass('active');\r\n\t\t\t}\r\n\t\t\tthis.syncingViewButtonState = false;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\r\n\tvar logWarn = function logWarn (msg) {\r\n\t\tif (window.console && window.console.warn) {\r\n\t\t\twindow.console.warn(msg);\r\n\t\t}\r\n\t};\r\n\r\n\tvar scan = function scan (cont) {\r\n\t\tvar keep = [];\r\n\t\tcont.children().each(function eachContainerChild () {\r\n\t\t\tvar item = $(this);\r\n\t\t\tvar pres = item.attr('data-preserve');\r\n\t\t\tif (pres === 'deep') {\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t} else if (pres === 'shallow') {\r\n\t\t\t\tscan(item);\r\n\t\t\t\titem.detach();\r\n\t\t\t\tkeep.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\tcont.empty();\r\n\t\tcont.append(keep);\r\n\t};\r\n\r\n\tvar addItem = function addItem ($parent, response) {\r\n\t\tvar action;\r\n\t\tif (response) {\r\n\t\t\taction = (response.action) ? response.action : 'append';\r\n\t\t\tif (action !== 'none' && response.item !== undefined) {\r\n\t\t\t\tvar $container = (response.container !== undefined) ? $(response.container) : $parent;\r\n\t\t\t\t$container[action](response.item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar callNextInit = function callNextInit (currentViewType, viewTypes, callback) {\r\n\t\tvar nextViewType = currentViewType + 1;\r\n\t\tif (nextViewType < viewTypes.length) {\r\n\t\t\tinitViewType.call(this, nextViewType, viewTypes, callback);\r\n\t\t} else {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t};\r\n\r\n\tvar initViewType = function initViewType (currentViewtype, viewTypes, callback) {\r\n\t\tif (viewTypes[currentViewtype].initialize) {\r\n\t\t\tviewTypes[currentViewtype].initialize.call(this, {}, function afterInitialize () {\r\n\t\t\t\tcallNextInit.call(this, currentViewtype, viewTypes, callback);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcallNextInit.call(this, currentViewtype, viewTypes, callback);\r\n\t\t}\r\n\t};\r\n\r\n\t// Does all of our cleanup post-render\r\n\tvar afterRender = function afterRender (state) {\r\n\t\tvar data = state.data || {};\r\n\r\n\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\tif (state.viewChanged || state.options.clearInfinite) {\r\n\t\t\t\tthis.initInfiniteScrolling();\r\n\t\t\t}\r\n\r\n\t\t\tthis.infiniteScrollPaging(data, state.options);\r\n\t\t}\r\n\r\n\t\tthis.$loader.hide().loader('pause');\r\n\t\tthis.enable();\r\n\r\n\t\tthis.$search.trigger('rendered.fu.repeater', {\r\n\t\t\tdata: data,\r\n\t\t\toptions: state.dataOptions,\r\n\t\t\trenderOptions: state.options\r\n\t\t});\r\n\t\tthis.$element.trigger('rendered.fu.repeater', {\r\n\t\t\tdata: data,\r\n\t\t\toptions: state.dataOptions,\r\n\t\t\trenderOptions: state.options\r\n\t\t});\r\n\r\n\t\t// for maintaining support of 'loaded' event\r\n\t\tthis.$element.trigger('loaded.fu.repeater', state.dataOptions);\r\n\t};\r\n\r\n\t// This does the actual rendering of the repeater\r\n\tvar doRender = function doRender (state) {\r\n\t\tvar data = state.data || {};\r\n\r\n\t\tif (this.infiniteScrollingEnabled) {\r\n\t\t\t// pass empty object because data handled in infiniteScrollPaging method\r\n\t\t\tthis.infiniteScrollingCallback({});\r\n\t\t} else {\r\n\t\t\tthis.itemization(data);\r\n\t\t\tthis.pagination(data);\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n\t\tthis.renderItems(\r\n\t\t\tstate.viewTypeObj,\r\n\t\t\tdata,\r\n\t\t\tfunction callAfterRender (d) {\r\n\t\t\t\tstate.data = d;\r\n\t\t\t\tafterRender.call(self, state);\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\r\n\r\n\t// For backwards compatibility.\r\n\tRepeater.prototype.runRenderer = Repeater.prototype.renderItems;\r\n\r\n\t// REPEATER PLUGIN DEFINITION\r\n\r\n\t$.fn.repeater = function fnrepeater (option) {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\t\tvar methodReturn;\r\n\r\n\t\tvar $set = this.each(function eachThis () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('fu.repeater');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('fu.repeater', (data = new Repeater(this, options)));\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tmethodReturn = data[option].apply(data, args);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t};\r\n\r\n\t$.fn.repeater.defaults = {\r\n\t\tdataSource: function dataSource (options, callback) {\r\n\t\t\tcallback({ count: 0, end: 0, items: [], page: 0, pages: 1, start: 0 });\r\n\t\t},\r\n\t\tdefaultView: -1, // should be a string value. -1 means it will grab the active view from the view controls\r\n\t\tdropPagingCap: 10,\r\n\t\tstaticHeight: -1, // normally true or false. -1 means it will look for data-staticheight on the element\r\n\t\tviews: null, // can be set to an object to configure multiple views of the same type,\r\n\t\tsearchOnKeyPress: false,\r\n\t\tallowCancel: true\r\n\t};\r\n\r\n\t$.fn.repeater.viewTypes = {};\r\n\r\n\t$.fn.repeater.Constructor = Repeater;\r\n\r\n\t$.fn.repeater.noConflict = function noConflict () {\r\n\t\t$.fn.repeater = old;\r\n\t\treturn this;\r\n\t};\r\n\r\n\r\n\treturn $.fn.repeater;\r\n\r\n});\r\n"]}