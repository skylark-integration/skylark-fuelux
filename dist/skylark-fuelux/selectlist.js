/**
 * skylark-fuelux - A version of fuelux that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.2
 * @link https://github.com/skylarkui/skylark-fuelux/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/browser","skylark-utils-dom/eventer","skylark-utils-dom/noder","skylark-utils-dom/geom","skylark-utils-dom/query","./fuelux","skylark-bootstrap3/dropdown"],function(e,t,i,s,l,n,d){var o=n.fn.selectlist,a=d.Selectlist=d.WidgetBase.inherit({klassName:"Selectlist",init:function(t,i){this.$element=n(t),this.options=e.mixin({},n.fn.selectlist.defaults,i),this.$button=this.$element.find(".btn.dropdown-toggle"),this.$hiddenField=this.$element.find(".hidden-field"),this.$label=this.$element.find(".selected-label"),this.$dropdownMenu=this.$element.find(".dropdown-menu"),this.$button.dropdown(),this.$element.on("click.fu.selectlist",".dropdown-menu a",e.proxy(this.itemClicked,this)),this.setDefaultSelection(),"auto"!==i.resize&&"auto"!==this.$element.attr("data-resize")||this.resize();var s=this.$dropdownMenu.children("li");0===s.length&&(this.disable(),this.doSelect(n(this.options.emptyLabelHTML))),this.$element.on("shown.bs.dropdown",function(){var e=n(this);n(document).on("keypress.fu.selectlist",function(t){var i=String.fromCharCode(t.which);e.find("li").each(function(e,t){if(n(t).text().charAt(0).toLowerCase()===i)return n(t).children("a").focus(),!1})})}),this.$element.on("hide.bs.dropdown",function(){n(document).off("keypress.fu.selectlist")})},destroy:function(){return this.$element.remove(),this.$element[0].outerHTML},doSelect:function(e){var t;this.$selectedItem=t=e,this.$hiddenField.val(this.$selectedItem.attr("data-value")),this.$label.html(n(this.$selectedItem.children()[0]).html()),this.$element.find("li").each(function(){t.is(n(this))?n(this).attr("data-selected",!0):n(this).removeData("selected").removeAttr("data-selected")})},itemClicked:function(e){this.$element.trigger("clicked.fu.selectlist",this.$selectedItem),e.preventDefault(),n(e.currentTarget).parent("li").is(".disabled, :disabled")||(n(e.target).parent().is(this.$selectedItem)||this.itemChanged(e),this.$element.find(".dropdown-toggle").focus())},itemChanged:function(e){this.doSelect(n(e.target).closest("li"));var t=this.selectedItem();this.$element.trigger("changed.fu.selectlist",t)},resize:function(){var e=0,t=0,i=n("<div/>").addClass("selectlist-sizer");Boolean(n(document).find("html").hasClass("fuelux"))?n(document.body).append(i):n(".fuelux:first").append(i),i.append(this.$element.clone()),this.$element.find("a").each(function(){i.find(".selected-label").text(n(this).text()),t=i.find(".selectlist").outerWidth(),t+=i.find(".sr-only").outerWidth(),t>e&&(e=t)}),e<=1||(this.$button.css("width",e),this.$dropdownMenu.css("width",e),i.remove())},selectedItem:function(){var t=this.$selectedItem.text();return e.mixin({text:t},this.$selectedItem.data())},selectByText:function(e){var t=n([]);this.$element.find("li").each(function(){if((this.textContent||this.innerText||n(this).text()||"").toLowerCase()===(e||"").toLowerCase())return t=n(this),!1}),this.doSelect(t)},selectByValue:function(e){var t='li[data-value="'+e+'"]';this.selectBySelector(t)},selectByIndex:function(e){var t="li:eq("+e+")";this.selectBySelector(t)},selectBySelector:function(e){var t=this.$element.find(e);this.doSelect(t)},setDefaultSelection:function(){var e=this.$element.find("li[data-selected=true]").eq(0);0===e.length&&(e=this.$element.find("li").has("a").eq(0)),this.doSelect(e)},enable:function(){this.$element.removeClass("disabled"),this.$button.removeClass("disabled")},disable:function(){this.$element.addClass("disabled"),this.$button.addClass("disabled")}});return a.prototype.getValue=a.prototype.selectedItem,n.fn.selectlist=function(e){var t,i=Array.prototype.slice.call(arguments,1),s=this.each(function(){var s=n(this),l=s.data("fu.selectlist"),d="object"==typeof e&&e;l||s.data("fu.selectlist",l=new a(this,d)),"string"==typeof e&&(t=l[e].apply(l,i))});return void 0===t?s:t},n.fn.selectlist.defaults={emptyLabelHTML:'<li data-value=""><a href="#">No items</a></li>'},n.fn.selectlist.Constructor=a,n.fn.selectlist.noConflict=function(){return n.fn.selectlist=o,this},n.fn.selectlist});
//# sourceMappingURL=sourcemaps/selectlist.js.map
