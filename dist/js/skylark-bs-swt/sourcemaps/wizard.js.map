{"version":3,"sources":["wizard.js"],"names":["define","langx","browser","eventer","noder","geom","$","old","fn","wizard","Wizard","element","options","this","$element","mixin","defaults","disablePreviousStep","attr","currentStep","selectedItem","step","numSteps","find","length","$prevBtn","$nextBtn","kids","children","detach","nextText","trim","text","append","steps","addClass","window","console","warn","on","proxy","previous","next","stepclicked","prototype","constructor","destroy","remove","outerHTML","addSteps","index","i","l","$pane","$startPane","$startStep","$step","items","slice","call","arguments","$steps","$stepContent","Array","label","badge","pane","before","syncSteps","setState","removeSteps","howMany","$start","action","undefined","prev","each","item","canMovePrev","isFirstStep","isLastStep","last","lastText","removeClass","prevSelector","$prevSteps","currentSelector","$currentStep","target","first","totalWidth","outerWidth","containerWidth","width","newMargin","position","left","e","Event","trigger","initialized","li","currentTarget","evt","isDefaultPrevented","isNaN","parseInt","html","direction","is","firstFormField","focus","retVal","Number","stepname","option","methodReturn","args","$set","$this","data","apply","Constructor","noConflict","document","$control","closest"],"mappings":"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","file":"../wizard.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/query\"\n],function(langx,browser,eventer,noder,geom,$){\n\n\t/*\n\t * Fuel UX Checkbox\n\t * https://github.com/ExactTarget/fuelux\n\t *\n\t * Copyright (c) 2014 ExactTarget\n\t * Licensed under the BSD New license.\n\t */\n\n\tvar old = $.fn.wizard;\n\n\t// WIZARD CONSTRUCTOR AND PROTOTYPE\n\n\tvar Wizard = function (element, options) {\n\t\tthis.$element = $(element);\n\t\tthis.options = langx.mixin({}, $.fn.wizard.defaults, options);\n\t\tthis.options.disablePreviousStep = (this.$element.attr('data-restrict') === 'previous') ? true : this.options.disablePreviousStep;\n\t\tthis.currentStep = this.options.selectedItem.step;\n\t\tthis.numSteps = this.$element.find('.steps li').length;\n\t\tthis.$prevBtn = this.$element.find('button.btn-prev');\n\t\tthis.$nextBtn = this.$element.find('button.btn-next');\n\n\t\tvar kids = this.$nextBtn.children().detach();\n\t\tthis.nextText = $.trim(this.$nextBtn.text());\n\t\tthis.$nextBtn.append(kids);\n\n\t\tvar steps = this.$element.children('.steps-container');\n\t\t// maintains backwards compatibility with < 3.8, will be removed in the future\n\t\tif (steps.length === 0) {\n\t\t\tsteps = this.$element;\n\t\t\tthis.$element.addClass('no-steps-container');\n\t\t\tif (window && window.console && window.console.warn) {\n\t\t\t\twindow.console.warn('please update your wizard markup to include \".steps-container\" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup');\n\t\t\t}\n\t\t}\n\t\tsteps = steps.find('.steps');\n\n\t\t// handle events\n\t\tthis.$prevBtn.on('click.fu.wizard', $.proxy(this.previous, this));\n\t\tthis.$nextBtn.on('click.fu.wizard', $.proxy(this.next, this));\n\t\tsteps.on('click.fu.wizard', 'li.complete', $.proxy(this.stepclicked, this));\n\n\t\tthis.selectedItem(this.options.selectedItem);\n\n\t\tif (this.options.disablePreviousStep) {\n\t\t\tthis.$prevBtn.attr('disabled', true);\n\t\t\tthis.$element.find('.steps').addClass('previous-disabled');\n\t\t}\n\t};\n\n\tWizard.prototype = {\n\n\t\tconstructor: Wizard,\n\n\t\tdestroy: function () {\n\t\t\tthis.$element.remove();\n\t\t\t// any external bindings [none]\n\t\t\t// empty elements to return to original markup [none]\n\t\t\t// returns string of markup\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\t//index is 1 based\n\t\t//second parameter can be array of objects [{ ... }, { ... }] or you can pass n additional objects as args\n\t\t//object structure is as follows (all params are optional): { badge: '', label: '', pane: '' }\n\t\taddSteps: function (index) {\n\t\t\tvar items = [].slice.call(arguments).slice(1);\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar i, l, $pane, $startPane, $startStep, $step;\n\n\t\t\tindex = (index === -1 || (index > (this.numSteps + 1))) ? this.numSteps + 1 : index;\n\t\t\tif (items[0] instanceof Array) {\n\t\t\t\titems = items[0];\n\t\t\t}\n\n\t\t\t$startStep = $steps.find('li:nth-child(' + index + ')');\n\t\t\t$startPane = $stepContent.find('.step-pane:nth-child(' + index + ')');\n\t\t\tif ($startStep.length < 1) {\n\t\t\t\t$startStep = null;\n\t\t\t}\n\n\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t$step = $('<li data-step=\"' + index + '\"><span class=\"badge badge-info\"></span></li>');\n\t\t\t\t$step.append(items[i].label || '').append('<span class=\"chevron\"></span>');\n\t\t\t\t$step.find('.badge').append(items[i].badge || index);\n\n\t\t\t\t$pane = $('<div class=\"step-pane\" data-step=\"' + index + '\"></div>');\n\t\t\t\t$pane.append(items[i].pane || '');\n\n\t\t\t\tif (!$startStep) {\n\t\t\t\t\t$steps.append($step);\n\t\t\t\t\t$stepContent.append($pane);\n\t\t\t\t} else {\n\t\t\t\t\t$startStep.before($step);\n\t\t\t\t\t$startPane.before($pane);\n\t\t\t\t}\n\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\t//index is 1 based, howMany is number to remove\n\t\tremoveSteps: function (index, howMany) {\n\t\t\tvar action = 'nextAll';\n\t\t\tvar i = 0;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar $start;\n\n\t\t\thowMany = (howMany !== undefined) ? howMany : 1;\n\n\t\t\tif (index > $steps.find('li').length) {\n\t\t\t\t$start = $steps.find('li:last');\n\t\t\t} else {\n\t\t\t\t$start = $steps.find('li:nth-child(' + index + ')').prev();\n\t\t\t\tif ($start.length < 1) {\n\t\t\t\t\taction = 'children';\n\t\t\t\t\t$start = $steps;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t$start[action]().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar step = item.attr('data-step');\n\t\t\t\tif (i < howMany) {\n\t\t\t\t\titem.remove();\n\t\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:first').remove();\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ti++;\n\t\t\t});\n\n\t\t\tthis.syncSteps();\n\t\t\tthis.numSteps = $steps.find('li').length;\n\t\t\tthis.setState();\n\t\t},\n\n\t\tsetState: function () {\n\t\t\tvar canMovePrev = (this.currentStep > 1);//remember, steps index is 1 based...\n\t\t\tvar isFirstStep = (this.currentStep === 1);\n\t\t\tvar isLastStep = (this.currentStep === this.numSteps);\n\n\t\t\t// disable buttons based on current step\n\t\t\tif (!this.options.disablePreviousStep) {\n\t\t\t\tthis.$prevBtn.attr('disabled', (isFirstStep === true || canMovePrev === false));\n\t\t\t}\n\n\t\t\t// change button text of last step, if specified\n\t\t\tvar last = this.$nextBtn.attr('data-last');\n\t\t\tif (last) {\n\t\t\t\tthis.lastText = last;\n\t\t\t\t// replace text\n\t\t\t\tvar text = this.nextText;\n\t\t\t\tif (isLastStep === true) {\n\t\t\t\t\ttext = this.lastText;\n\t\t\t\t\t// add status class to wizard\n\t\t\t\t\tthis.$element.addClass('complete');\n\t\t\t\t} else {\n\t\t\t\t\tthis.$element.removeClass('complete');\n\t\t\t\t}\n\n\t\t\t\tvar kids = this.$nextBtn.children().detach();\n\t\t\t\tthis.$nextBtn.text(text).append(kids);\n\t\t\t}\n\n\t\t\t// reset classes for all steps\n\t\t\tvar $steps = this.$element.find('.steps li');\n\t\t\t$steps.removeClass('active').removeClass('complete');\n\t\t\t$steps.find('span.badge').removeClass('badge-info').removeClass('badge-success');\n\n\t\t\t// set class for all previous steps\n\t\t\tvar prevSelector = '.steps li:lt(' + (this.currentStep - 1) + ')';\n\t\t\tvar $prevSteps = this.$element.find(prevSelector);\n\t\t\t$prevSteps.addClass('complete');\n\t\t\t$prevSteps.find('span.badge').addClass('badge-success');\n\n\t\t\t// set class for current step\n\t\t\tvar currentSelector = '.steps li:eq(' + (this.currentStep - 1) + ')';\n\t\t\tvar $currentStep = this.$element.find(currentSelector);\n\t\t\t$currentStep.addClass('active');\n\t\t\t$currentStep.find('span.badge').addClass('badge-info');\n\n\t\t\t// set display of target element\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\t\t\tvar target = $currentStep.attr('data-step');\n\t\t\t$stepContent.find('.step-pane').removeClass('active');\n\t\t\t$stepContent.find('.step-pane[data-step=\"' + target + '\"]:first').addClass('active');\n\n\t\t\t// reset the wizard position to the left\n\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\n\t\t\t// check if the steps are wider than the container div\n\t\t\tvar totalWidth = 0;\n\t\t\tthis.$element.find('.steps > li').each(function () {\n\t\t\t\ttotalWidth += $(this).outerWidth();\n\t\t\t});\n\t\t\tvar containerWidth = 0;\n\t\t\tif (this.$element.find('.actions').length) {\n\t\t\t\tcontainerWidth = this.$element.width() - this.$element.find('.actions').first().outerWidth();\n\t\t\t} else {\n\t\t\t\tcontainerWidth = this.$element.width();\n\t\t\t}\n\n\t\t\tif (totalWidth > containerWidth) {\n\t\t\t\t// set the position so that the last step is on the right\n\t\t\t\tvar newMargin = totalWidth - containerWidth;\n\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\n\t\t\t\t// set the position so that the active step is in a good\n\t\t\t\t// position if it has been moved out of view\n\t\t\t\tif (this.$element.find('li.active').first().position().left < 200) {\n\t\t\t\t\tnewMargin += this.$element.find('li.active').first().position().left - 200;\n\t\t\t\t\tif (newMargin < 1) {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: 0');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$element.find('.steps').first().attr('style', 'margin-left: -' + newMargin + 'px');\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// only fire changed event after initializing\n\t\t\tif (typeof (this.initialized) !== 'undefined') {\n\t\t\t\tvar e = $.Event('changed.fu.wizard');\n\t\t\t\tthis.$element.trigger(e, {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.initialized = true;\n\t\t},\n\n\t\tstepclicked: function (e) {\n\t\t\tvar li = $(e.currentTarget);\n\t\t\tvar index = this.$element.find('.steps li').index(li);\n\n\t\t\tif (index < this.currentStep && this.options.disablePreviousStep) {//enforce restrictions\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tvar evt = $.Event('stepclicked.fu.wizard');\n\t\t\t\tthis.$element.trigger(evt, {\n\t\t\t\t\tstep: index + 1\n\t\t\t\t});\n\t\t\t\tif (evt.isDefaultPrevented()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.currentStep = (index + 1);\n\t\t\t\tthis.setState();\n\t\t\t}\n\t\t},\n\n\t\tsyncSteps: function () {\n\t\t\tvar i = 1;\n\t\t\tvar $steps = this.$element.find('.steps');\n\t\t\tvar $stepContent = this.$element.find('.step-content');\n\n\t\t\t$steps.children().each(function () {\n\t\t\t\tvar item = $(this);\n\t\t\t\tvar badge = item.find('.badge');\n\t\t\t\tvar step = item.attr('data-step');\n\n\t\t\t\tif (!isNaN(parseInt(badge.html(), 10))) {\n\t\t\t\t\tbadge.html(i);\n\t\t\t\t}\n\n\t\t\t\titem.attr('data-step', i);\n\t\t\t\t$stepContent.find('.step-pane[data-step=\"' + step + '\"]:last').attr('data-step', i);\n\t\t\t\ti++;\n\t\t\t});\n\t\t},\n\n\t\tprevious: function () {\n\t\t\tif (this.options.disablePreviousStep || this.currentStep === 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar e = $.Event('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'previous'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// don't increment ...what? Why?\n\n\t\t\tthis.currentStep -= 1;\n\t\t\tthis.setState();\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$prevBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$prevBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$nextBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tnext: function () {\n\t\t\tvar e = $.Event('actionclicked.fu.wizard');\n\t\t\tthis.$element.trigger(e, {\n\t\t\t\tstep: this.currentStep,\n\t\t\t\tdirection: 'next'\n\t\t\t});\n\t\t\tif (e.isDefaultPrevented()) {\n\t\t\t\treturn;\n\t\t\t}// respect preventDefault in case dev has attached validation to step and wants to stop propagation based on it.\n\n\t\t\tif (this.currentStep < this.numSteps) {\n\t\t\t\tthis.currentStep += 1;\n\t\t\t\tthis.setState();\n\t\t\t} else {//is last step\n\t\t\t\tthis.$element.trigger('finished.fu.wizard');\n\t\t\t}\n\n\t\t\t// only set focus if focus is still on the $nextBtn (avoid stomping on a focus set programmatically in actionclicked callback)\n\t\t\tif (this.$nextBtn.is(':focus')) {\n\t\t\t\tvar firstFormField = this.$element.find('.active').find('input, select, textarea')[0];\n\n\t\t\t\tif (typeof firstFormField !== 'undefined') {\n\t\t\t\t\t// allow user to start typing immediately instead of having to click on the form field.\n\t\t\t\t\t$(firstFormField).focus();\n\t\t\t\t} else if (this.$element.find('.active input:first').length === 0 && this.$nextBtn.is(':disabled')) {\n\t\t\t\t\t//only set focus on a button as the last resort if no form fields exist and the just clicked button is now disabled\n\t\t\t\t\tthis.$prevBtn.focus();\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tselectedItem: function (selectedItem) {\n\t\t\tvar retVal, step;\n\n\t\t\tif (selectedItem) {\n\t\t\t\tstep = selectedItem.step || -1;\n\t\t\t\t//allow selection of step by data-name\n\t\t\t\tstep = Number(this.$element.find('.steps li[data-name=\"' + step + '\"]').first().attr('data-step')) || Number(step);\n\n\t\t\t\tif (1 <= step && step <= this.numSteps) {\n\t\t\t\t\tthis.currentStep = step;\n\t\t\t\t\tthis.setState();\n\t\t\t\t} else {\n\t\t\t\t\tstep = this.$element.find('.steps li.active:first').attr('data-step');\n\t\t\t\t\tif (!isNaN(step)) {\n\t\t\t\t\t\tthis.currentStep = parseInt(step, 10);\n\t\t\t\t\t\tthis.setState();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tretVal = this;\n\t\t\t} else {\n\t\t\t\tretVal = {\n\t\t\t\t\tstep: this.currentStep\n\t\t\t\t};\n\t\t\t\tif (this.$element.find('.steps li.active:first[data-name]').length) {\n\t\t\t\t\tretVal.stepname = this.$element.find('.steps li.active:first').attr('data-name');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn retVal;\n\t\t}\n\t};\n\n\n\t// WIZARD PLUGIN DEFINITION\n\n\t$.fn.wizard = function (option) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\tvar methodReturn;\n\n\t\tvar $set = this.each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar data = $this.data('fu.wizard');\n\t\t\tvar options = typeof option === 'object' && option;\n\n\t\t\tif (!data) {\n\t\t\t\t$this.data('fu.wizard', (data = new Wizard(this, options)));\n\t\t\t}\n\n\t\t\tif (typeof option === 'string') {\n\t\t\t\tmethodReturn = data[option].apply(data, args);\n\t\t\t}\n\t\t});\n\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\n\t};\n\n\t$.fn.wizard.defaults = {\n\t\tdisablePreviousStep: false,\n\t\tselectedItem: {\n\t\t\tstep: -1\n\t\t}//-1 means it will attempt to look for \"active\" class in order to set the step\n\t};\n\n\t$.fn.wizard.Constructor = Wizard;\n\n\t$.fn.wizard.noConflict = function () {\n\t\t$.fn.wizard = old;\n\t\treturn this;\n\t};\n\n\n\t// DATA-API\n\n\t$(document).on('mouseover.fu.wizard.data-api', '[data-initialize=wizard]', function (e) {\n\t\tvar $control = $(e.target).closest('.wizard');\n\t\tif (!$control.data('fu.wizard')) {\n\t\t\t$control.wizard($control.data());\n\t\t}\n\t});\n\n\t// Must be domReady for AMD compatibility\n\t$(function () {\n\t\t$('[data-initialize=wizard]').each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tif ($this.data('fu.wizard')) return;\n\t\t\t$this.wizard($this.data());\n\t\t});\n\t});\n\n});\n"]}