{"version":3,"sources":["window.js"],"names":["define","langx","browser","eventer","noder","geom","$","sbswt","namespace","Window","options","defaults","selectors","handle","title","body","footer","elements","references","window","effect","parseHandleForTitle","maximized","maximizable","bodyContent","footerContent","this","mixin","initialize","prototype","_this","fromElement","jQuery","$el","clone","Element","template","Error","hasClass","addClass","data","find","length","prepend","html","buttons","maximize","restore","undock","setSticky","sticky","css","appendTo","centerWindow","test","navigator","userAgent","bind","event","on","e","stopPropagation","initHandlers","hide","id","show","removeClass","state","bottomOffset","window_manager","getContainer","height","top","parseInt","left","right","bottom","maxWidth","width","trigger","removeAttr","undefined","window_info","removeProp","cb","callbackHandler","call","arguments","fadeIn","setEffect","getEffect","maxHeight","bodyTop","position","outerWidth","outerHeight","close","parent","clearBlocker","setFocused","windows","setNextFocused","closeFn","remove","fadeOut","$windowTab","apply","sendToBack","returnVal","setActive","active","setIndex","index","setWindowTab","windowTab","getWindowTab","getTitle","getElement","getSticky","setManager","preventDefault","blocker","off","blink","resizing","offset","x","pageX","y","pageY","offsetY","offsetX","moving","toElement","replace","resizable","resize","setBlocker","window_handle","shade","append","getParent","setParent","getBlocker","focused","blinkInterval","setInterval","toggleClass","setTimeout","clearInterval","fn","newWindow","window_opts","$this","opts","WindowManager","WindowManger","findWindowByID","returnValue","each","console","log","destroyWindow","splice","resortWindows","closeWindow","startZIndex","focused_window","focusedWindowIndex","windowHandle","push","indexOf","unshift","container","addWindow","window_object","scrollTo","createWindow","window_options","final_options","windowTemplate"],"mappings":"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","file":"../window.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/query\",\n  \"./sbswt\"\n],function(langx,browser,eventer,noder,geom,$,sbswt){\n\n\n/*----------------------------------------------------------------------*/\n    /*\n    https://github.com/earmbrust/bootstrap-window\n\n    Copyright (c) 2013-2015 Elden Armbrust\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy\n    of this software and associated documentation files (the \"Software\"), to deal\n    in the Software without restriction, including without limitation the rights\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n    copies of the Software, and to permit persons to whom the Software is\n    furnished to do so, subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in\n    all copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n    THE SOFTWARE.\n    */\n    var namespace = 'bsw',\n        Window = function(options) {\n            options = options || {};\n            var defaults = {\n                selectors: {\n                    handle: '.window-header',\n                    title: '.window-title',\n                    body: '.window-body',\n                    footer: '.window-footer'\n                },\n                elements: {\n                    handle: null,\n                    title: null,\n                    body: null,\n                    footer: null\n                },\n                references: {\n                    body: $('body'),\n                    window: $(window)\n                },\n                effect: 'fade',\n                parseHandleForTitle: true,\n                maximized: false,\n                maximizable: false,\n                title: 'No Title',\n                bodyContent: '',\n                footerContent: ''\n            };\n            this.options = langx.mixin({}, defaults, options,true);\n            this.initialize(this.options);\n            return this;\n        };\n\n    Window.prototype.initialize = function(options) {\n        var _this = this;\n\n        if (options.fromElement) {\n            if (options.fromElement instanceof jQuery) {\n                this.$el = options.clone ? options.fromElement.clone() : options.fromElement;\n            } else if (options.fromElement instanceof Element) {\n                this.$el = options.clone ? $(options.fromElement).clone() : $(options.fromElement);\n            } else if (typeof options.fromElement) {\n                this.$el = options.clone ? $(options.fromElement).clone() : $(options.fromElement);\n            }\n        } else if (options.template) {\n            this.$el = $(options.template);\n        } else {\n            throw new Error(\"No template specified for window.\");\n        }\n        if (!this.$el.hasClass('window')) {\n            this.$el.addClass('window');\n        }\n        this.$el.data('window', this);\n\n        if (this.$el.find(options.selectors.handle).length <= 0) {\n            this.$el.prepend('<div class=\"window-header\"><h4 class=\"window-title\"></h4></div>');\n        }\n\n        options.elements.handle = this.$el.find(options.selectors.handle);\n        options.elements.title = this.$el.find(options.selectors.title);\n        options.elements.body = this.$el.find(options.selectors.body);\n        options.elements.footer = this.$el.find(options.selectors.footer);\n        options.elements.title.html(options.title);\n\n        if (options.maximizable) {\n            options.elements.buttons = {};\n            options.elements.buttons.maximize = $('<button data-maximize=\"window\"><i class=\"glyphicon glyphicon-chevron-up\"></i></button>');\n            options.elements.handle.prepend(options.elements.buttons.maximize);\n            options.elements.buttons.restore = $('<button data-restore=\"window\"><i class=\"glyphicon glyphicon-modal-window\"></i></button>');\n            options.elements.handle.prepend(options.elements.buttons.restore);\n\n        }\n        if (_this.$el.find('[data-dismiss=window]').length <= 0) {\n            options.elements.handle.prepend('<button type=\"button\" class=\"close\" data-dismiss=\"window\" aria-hidden=\"true\"><i class=\"glyphicon glyphicon-remove\"></i></button>');\n        }\n        options.elements.body.html(options.bodyContent);\n        options.elements.footer.html(options.footerContent);\n\n        this.undock();\n\n        this.setSticky(options.sticky);\n    };\n\n    Window.prototype.undock = function() {\n        var _this = this;\n        this.$el.css('visibility', 'hidden');\n        this.$el.appendTo('body');\n        this.centerWindow();\n        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n            this.options.references.window.bind('orientationchange resize', function(event) {\n                _this.centerWindow();\n            });\n        }\n\n        this.$el.on('touchmove', function(e) {\n            e.stopPropagation();\n        });\n\n        this.initHandlers();\n        this.$el.hide();\n        if (this.options.id) {\n            this.id = this.options.id;\n        } else {\n            this.id = '';\n        }\n        this.show();\n    };\n\n    Window.prototype.maximize = function() {\n        this.$el.removeClass('minimized');\n        this.$el.addClass('maximized');\n        this.state = \"maximized\";\n        var bottomOffset = 0;\n        if (this.options.window_manager) {\n            bottomOffset = this.options.window_manager.getContainer().height();\n        }\n        this.$el.css({\n            top: parseInt($('body').css('padding-top'), 10),\n            left: 0,\n            right: 0,\n            bottom: bottomOffset,\n            maxWidth: 'none',\n            width: 'auto',\n            height: 'auto'\n        });\n        this.$el.trigger(namespace + '.maximize');\n    };\n\n\n    Window.prototype.restore = function() {\n        this.$el.removeClass('minimized');\n        this.$el.removeClass('maximized');\n        this.$el.removeAttr('style');\n        this.state = undefined;\n        this.$el.css({\n            top: this.window_info.top,\n            left: this.window_info.left,\n            width: this.window_info.width,\n            height: this.window_info.height\n        });\n        this.$el.removeProp('style');\n        this.$el.trigger(namespace + '.restore');\n    };\n\n    Window.prototype.show = function(cb) {\n        var _this = this;\n        this.$el.css('visibility', 'visible');\n        var callbackHandler = function() {\n            _this.$el.trigger(namespace + '.show');\n            if (cb) {\n                cb.call(_this, arguments);\n            }\n        };\n        if (this.options.effect === 'fade') {\n            this.$el.fadeIn(undefined, undefined, callbackHandler);\n        } else {\n            callbackHandler.call(this.$el);\n        }\n    };\n\n    Window.prototype.setEffect = function(effect) {\n        this.options.effect = effect;\n    };\n\n    Window.prototype.getEffect = function() {\n        return this.options.effect;\n    };\n\n    Window.prototype.centerWindow = function() {\n        var top, left,\n            bodyTop = parseInt(this.options.references.body.position().top, 10) + parseInt(this.options.references.body.css('paddingTop'), 10),\n            maxHeight;\n        if (!this.options.sticky) {\n            left = (this.options.references.window.width() / 2) - (this.$el.width() / 2);\n            top = (this.options.references.window.height() / 2) - (this.$el.height() / 2);\n        } else {\n            left = (this.options.references.window.width() / 2) - (this.$el.width() / 2);\n            top = (this.options.references.window.height() / 2) - (this.$el.height() / 2);\n        }\n\n        if (top < bodyTop) {\n            top = bodyTop;\n        }\n        maxHeight = ((this.options.references.window.height() - bodyTop) - (parseInt(this.options.elements.handle.css('height'), 10) + parseInt(this.options.elements.footer.css('height'), 10))) - 45;\n        this.options.elements.body.css('maxHeight', maxHeight);\n\n        this.$el.css('left', left);\n        this.$el.css('top', top);\n        if (this.$el && this.$el.length > 0) {\n            this.window_info = {\n                top: this.$el.position().top,\n                left: this.$el.position().left,\n                width: this.$el.outerWidth(),\n                height: this.$el.outerHeight()\n            };\n        }\n        this.$el.trigger(namespace + '.centerWindow');\n\n\n\n    };\n\n    Window.prototype.close = function(cb) {\n        var _this = this;\n        if (this.options.parent) {\n            this.options.parent.clearBlocker();\n            if (this.options.window_manager) {\n                this.options.window_manager.setFocused(this.options.parent);\n            }\n        } else if (this.options.window_manager && this.options.window_manager.windows.length > 0) {\n            this.options.window_manager.setNextFocused();\n        }\n\n        var closeFn = function() {\n            _this.$el.trigger(namespace + '.close');\n            _this.$el.remove();\n            if (cb) {\n                cb.call(_this);\n            }\n        };\n\n        if (this.options.effect === 'fade') {\n            this.$el.fadeOut(closeFn);\n        } else {\n            closeFn.call(_this.$el);\n        }\n\n        if (this.$windowTab) {\n            if (this.options.effect === 'fade') {\n                this.$windowTab.fadeOut(400, function() {\n                    _this.$windowTab.remove();\n                });\n            } else {\n                this.$windowTab.hide();\n                this.$windowTab.remove();\n            }\n\n        }\n    };\n\n    Window.prototype.on = function() {\n        this.$el.on.apply(this.$el, arguments);\n    };\n\n    Window.prototype.sendToBack = function () {\n        var returnVal = false;\n        if (this.options.window_manager) {\n            returnVal = this.options.window_manager.sendToBack(this);\n        }\n        return returnVal;\n    };\n\n    Window.prototype.setActive = function(active) {\n        if (active) {\n            this.$el.addClass('active');\n            if (this.$windowTab) {\n                this.$windowTab.addClass('label-primary');\n            }\n            this.$el.trigger('active');\n        } else {\n            this.$el.removeClass('active');\n            if (this.$windowTab) {\n                this.$windowTab.removeClass('label-primary');\n                this.$windowTab.addClass('label-default');\n            }\n            this.$el.trigger('inactive');\n        }\n    };\n\n    Window.prototype.setIndex = function(index) {\n        this.$el.css('zIndex', index);\n    };\n\n    Window.prototype.setWindowTab = function(windowTab) {\n        this.$windowTab = windowTab;\n    };\n    Window.prototype.getWindowTab = function() {\n        return this.$windowTab;\n    };\n\n    Window.prototype.getTitle = function() {\n        return this.options.title;\n    };\n\n    Window.prototype.getElement = function() {\n        return this.$el;\n    };\n\n    Window.prototype.setSticky = function(sticky) {\n        this.options.sticky = sticky;\n        if (sticky === false) {\n            this.$el.css({\n                'position': 'absolute'\n            });\n        } else {\n            this.$el.css({\n                'position': 'fixed'\n            });\n        }\n    };\n\n    Window.prototype.getSticky = function() {\n        return this.options.sticky;\n    };\n\n    Window.prototype.setManager = function(window_manager) {\n        this.options.window_manager = window_manager;\n    };\n\n    Window.prototype.initHandlers = function() {\n        var _this = this;\n        var title_buttons;\n\n        this.$el.find('[data-dismiss=window]').on('click', function(event) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (_this.options.blocker) {\n                return;\n            }\n            _this.close();\n        });\n\n        this.$el.find('[data-maximize=window]').on('click', function(event) {\n            event.stopPropagation();\n            event.preventDefault();\n            if (_this.options.blocker) {\n                return;\n            }\n            _this.maximize();\n        });\n\n        this.$el.find('[data-restore=window]').on('click', function(event) {\n            if (_this.options.blocker) {\n                return;\n            }\n            _this.restore();\n        });\n\n        this.$el.off('mousedown');\n        this.$el.on('mousedown', function() {\n            if (_this.options.blocker) {\n                _this.options.blocker.getElement().trigger('focused');\n                _this.options.blocker.blink();\n                return;\n            } else {\n                _this.$el.trigger('focused');\n            }\n\n            if (_this.$el.hasClass('ns-resize') || _this.$el.hasClass('ew-resize')) {\n                $('body > *').addClass('disable-select');\n                _this.resizing = true;\n                _this.offset = {};\n                _this.offset.x = event.pageX;\n                _this.offset.y = event.pageY;\n                _this.window_info = {\n                    top: _this.$el.position().top,\n                    left: _this.$el.position().left,\n                    width: _this.$el.outerWidth(),\n                    height: _this.$el.outerHeight()\n                };\n\n                if (event.offsetY < 5) {\n                    _this.$el.addClass('north');\n                }\n                if (event.offsetY > (_this.$el.height() - 5)) {\n                    _this.$el.addClass('south');\n                }\n                if (event.offsetX < 5) {\n                    _this.$el.addClass('west');\n                }\n                if (event.offsetX > (_this.$el.width() - 5)) {\n                    _this.$el.addClass('east');\n                }\n            }\n        });\n\n        _this.options.references.body.on('mouseup', function() {\n            _this.resizing = false;\n            $('body > *').removeClass('disable-select');\n            _this.$el.removeClass('west');\n            _this.$el.removeClass('east');\n            _this.$el.removeClass('north');\n            _this.$el.removeClass('south');\n\n        });\n        _this.options.elements.handle.off('mousedown');\n        _this.options.elements.handle.on('mousedown', function(event) {\n            if (_this.options.blocker) {\n                return;\n            }\n            _this.moving = true;\n            _this.offset = {};\n            _this.offset.x = event.pageX - _this.$el.position().left;\n            _this.offset.y = event.pageY - _this.$el.position().top;\n            $('body > *').addClass('disable-select');\n        });\n        _this.options.elements.handle.on('mouseup', function(event) {\n            _this.moving = false;\n            $('body > *').removeClass('disable-select');\n        });\n\n\n        _this.options.references.body.on('mousemove', _this.$el, function(event) {\n            if (_this.moving && _this.state !== \"maximized\" &&\n                (\n                    $(event.toElement).hasClass(_this.options.selectors.handle.replace('.', '')) ||\n                    $(event.toElement).hasClass(_this.options.selectors.title.replace('.', ''))\n                )) {\n\n\n                var top = _this.options.elements.handle.position().top,\n                    left = _this.options.elements.handle.position().left;\n                _this.$el.css('top', event.pageY - _this.offset.y);\n                _this.window_info.top = event.pageY - _this.offset.y;\n                _this.$el.css('left', event.pageX - _this.offset.x);\n                _this.window_info.left = event.pageX - _this.offset.x;\n                _this.window_info.width = _this.$el.outerWidth();\n                _this.window_info.height = _this.$el.outerHeight();\n            }\n            if (_this.options.resizable && _this.resizing) {\n                if (_this.$el.hasClass(\"east\")) {\n                    _this.$el.css('width', event.pageX - _this.window_info.left);\n                }\n                if (_this.$el.hasClass(\"west\")) {\n\n                    _this.$el.css('left', event.pageX);\n                    _this.$el.css('width', _this.window_info.width + (_this.window_info.left - event.pageX));\n                }\n                if (_this.$el.hasClass(\"south\")) {\n                    _this.$el.css('height', event.pageY - _this.window_info.top);\n                }\n                if (_this.$el.hasClass(\"north\")) {\n                    _this.$el.css('top', event.pageY);\n                    _this.$el.css('height', _this.window_info.height + (_this.window_info.top - event.pageY));\n                }\n            }\n        });\n\n        this.$el.on('mousemove', function(event) {\n            if (_this.options.blocker) {\n                return;\n            }\n            if (_this.options.resizable) {\n                if (event.offsetY > (_this.$el.height() - 5) || event.offsetY < 5) {\n                    _this.$el.addClass('ns-resize');\n                } else {\n                    _this.$el.removeClass('ns-resize');\n                }\n                if (event.offsetX > (_this.$el.width() - 5) || event.offsetX < 5) {\n                    _this.$el.addClass('ew-resize');\n\n                } else {\n                    _this.$el.removeClass('ew-resize');\n                }\n            }\n\n        });\n    };\n\n    Window.prototype.resize = function(options) {\n        options = options || {};\n        if (options.top) {\n            this.$el.css('top', options.top);\n        }\n        if (options.left) {\n            this.$el.css('left', options.left);\n        }\n        if (options.height) {\n            this.$el.css('height', options.height);\n        }\n        if (options.width) {\n            this.$el.css('width', options.width);\n        }\n        this.$el.trigger(namespace + '.resize');\n    };\n\n    Window.prototype.setBlocker = function(window_handle) {\n        this.options.blocker = window_handle;\n        this.$el.find('.disable-shade').remove();\n        var shade = '<div class=\"disable-shade\"></div>';\n        this.options.elements.body.append(shade);\n        this.options.elements.body.addClass('disable-scroll');\n        this.options.elements.footer.append(shade);\n        if (this.options.effect === 'fade') {\n            this.$el.find('.disable-shade').fadeIn();\n        } else {\n            this.$el.find('.disable-shade').show();\n        }\n\n        if (!this.options.blocker.getParent()) {\n            this.options.blocker.setParent(this);\n        }\n    };\n\n\n    Window.prototype.getBlocker = function() {\n        return this.options.blocker;\n    };\n\n    Window.prototype.clearBlocker = function() {\n        this.options.elements.body.removeClass('disable-scroll');\n        if (this.options.effect === 'fade') {\n            this.$el.find('.disable-shade').fadeOut(function() {\n                this.remove();\n            });\n        } else {\n            this.$el.find('.disable-shade').hide();\n            this.remove();\n        }\n\n        delete this.options.blocker;\n    };\n\n    Window.prototype.setParent = function(window_handle) {\n        this.options.parent = window_handle;\n        if (!this.options.parent.getBlocker()) {\n            this.options.parent.setBlocker(this);\n        }\n    };\n\n    Window.prototype.getParent = function() {\n        return this.options.parent;\n    };\n\n    Window.prototype.blink = function() {\n        var _this = this,\n            active = this.$el.hasClass('active'),\n\n            windowTab = this.getWindowTab(),\n            focused = windowTab ? windowTab.hasClass('label-primary') : undefined,\n\n            blinkInterval = setInterval(function() {\n                _this.$el.toggleClass('active');\n                if (windowTab) {\n                    windowTab.toggleClass('label-primary');\n                }\n\n            }, 250),\n            blinkTimeout = setTimeout(function() {\n                clearInterval(blinkInterval);\n                if (active) {\n                    _this.$el.addClass('active');\n                }\n                if (windowTab && focused) {\n                    windowTab.addClass('label-primary');\n                }\n\n            }, 1000);\n    };\n\n    $.fn.window = function(options) {\n        options = options || {};\n        var newWindow,\n            window_opts = langx.mixin({\n                fromElement: this,\n                selectors: {}\n            }, options || {});\n        if (typeof options === \"object\") {\n            if (window_opts.selectors.handle) {\n                this.find(window_opts.selectors.handle).css('cursor', 'move');\n            }\n\n            newWindow = new Window(langx.mixin({}, window_opts, window_opts));\n            //this.data('window', newWindow);\n\n\n        } else if (typeof options === \"string\") {\n            switch (options) {\n                case \"close\":\n                    this.data('window').close();\n                    break;\n                case \"show\":\n                    this.data('window').show();\n                    break;\n                case \"maximize\":\n                    this.data('window').maximize();\n                    break;\n                default:\n                    break;\n            }\n        }\n\n\n        return this;\n\n    };\n\n    $('[data-window-target]').off('click');\n    $('[data-window-target]').on('click', function() {\n        var $this = $(this),\n            opts = {\n                selectors: {}\n            };\n        if ($this.data('windowTitle')) {\n            opts.title = $this.data('windowTitle');\n        }\n\n        if ($this.data('titleHandle')) {\n            opts.selectors.title = $this.data('titleHandle');\n        }\n\n        if ($this.data('windowHandle')) {\n            opts.selectors.handle = $this.data('windowHandle');\n        }\n        if ($this.data('clone')) {\n            opts.clone = $this.data('windowHandle');\n        }\n\n        $($this.data('windowTarget')).window(opts);\n    });\n\n\n    var WindowManager = Window.WindowManger = function(options) {\n        this.windows = [];\n        options = options || {};\n        this.initialize(options);\n        return this;\n    };\n\n    WindowManager.prototype.findWindowByID = function(id) {\n        var returnValue = null;\n        langx.each(this.windows, function(index, window) {\n            console.log(arguments);\n            if (window.id === id) {\n                returnValue = window;\n            }\n        });\n        return returnValue;\n    };\n\n    WindowManager.prototype.destroyWindow = function(window_handle) {\n        var _this = this;\n        var returnVal = false;\n        langx.each(this.windows, function(index, window) {\n            if (window === window_handle) {\n                window_handle.close();\n                _this.windows.splice(index, 1);\n                _this.resortWindows();\n                returnVal = true;\n            }\n        });\n        return returnVal;\n    };\n\n    WindowManager.prototype.closeWindow = WindowManager.prototype.destroyWindow;\n\n    WindowManager.prototype.resortWindows = function() {\n        var startZIndex = 900;\n        langx.each(this.windows, function(index, window) {\n\n            window.setIndex(startZIndex + index);\n        });\n    };\n\n    WindowManager.prototype.setFocused = function(focused_window) {\n        var focusedWindowIndex;\n        while (focused_window.getBlocker()) {\n            focused_window = focused_window.getBlocker();\n        }\n        langx.each(this.windows, function(index, windowHandle) {\n            windowHandle.setActive(false);\n            if (windowHandle === focused_window) {\n                focusedWindowIndex = index;\n            }\n        });\n        this.windows.push(this.windows.splice(focusedWindowIndex, 1)[0]);\n        focused_window.setActive(true);\n        this.resortWindows();\n\n    };\n\n    WindowManager.prototype.sendToBack = function(window) {\n        var windowHandle = this.windows.splice(this.windows.indexOf(window), 1)[0];\n        this.windows.unshift(windowHandle);\n        this.resortWindows();\n        return true;\n    };\n\n\n    WindowManager.prototype.initialize = function(options) {\n        this.options = options;\n        this.elements = {};\n\n        if (this.options.container) {\n            this.elements.container = $(this.options.container);\n            this.elements.container.addClass('window-pane');\n        }\n    };\n\n    WindowManager.prototype.getContainer = function() {\n        var returnVal;\n        if (this.elements && this.elements.container) {\n            returnVal = this.elements.container;\n        }\n        return returnVal;\n    };\n\n    WindowManager.prototype.setNextFocused = function() {\n        this.setFocused(this.windows[this.windows.length - 1]);\n    };\n\n    WindowManager.prototype.addWindow = function(window_object) {\n        var _this = this;\n        window_object.getElement().on('focused', function(event) {\n            _this.setFocused(window_object);\n        });\n        window_object.getElement().on('close', function() {\n            _this.destroyWindow(window_object);\n            if (window_object.getWindowTab()) {\n                window_object.getWindowTab().remove();\n            }\n\n        });\n\n        window_object.on('bsw.restore', function() {\n            _this.resortWindows();\n        });\n\n        if (this.options.container) {\n            window_object.setWindowTab($('<span class=\"label label-default\">' + window_object.getTitle() + '<button class=\"close\">x</button></span>'));\n            window_object.getWindowTab().find('.close').on('click', function(event) {\n                var blocker = window_object.getBlocker();\n                if (!blocker) {\n                    window_object.close();\n                } else {\n                    blocker.blink();\n                }\n\n            });\n            window_object.getWindowTab().on('click', function(event) {\n                var blocker = window_object.getBlocker();\n                if (!blocker) {\n                    _this.setFocused(window_object);\n                    if (window_object.getSticky()) {\n                        window.scrollTo(0, window_object.getElement().position().top);\n                    }\n                } else {\n                    blocker.blink();\n                }\n            });\n\n            $(this.options.container).append(window_object.getWindowTab());\n        }\n\n        this.windows.push(window_object);\n        window_object.setManager(this);\n        this.setFocused(window_object);\n        return window_object;\n    };\n\n    WindowManager.prototype.createWindow = function(window_options) {\n        var _this = this;\n        var final_options = langx.mixin({},window_options);\n        if (this.options.windowTemplate && !final_options.template) {\n            final_options.template = this.options.windowTemplate;\n        }\n\n        var newWindow = new Window(final_options);\n\n\n        return this.addWindow(newWindow);\n    };\n\n/*----------------------------------------------------------------------*/\n    langx.mixin(sbswt,{\n        Window : Window,\n        WindowManager : WindowManager\n    });\n\n    return Window;  \n});\n"]}