{"version":3,"sources":["toolbar.js"],"names":["define","langx","browser","eventer","noder","geom","$","sbswt","Toolbar","WidgetBase","inherit","klassName","init","elm","options","this","_options","mixin","autoredraw","buttons","context","list","show","$container","$el","append","render","createToolbarItems","items","container","each","i","item","type","createButtonGroup","createButton","createDrop","createInput","group","class","role","button","attrs","icon","text","attr","dropdown_group","dropdown_button","dropdown_list","addClass","dropdown_option","dropdown_option_li","input_group","input_element","input_prefix","html","prefix","input_sufix","sufix","inputType","fn","toolbar"],"mappings":";;;;;;;AAAAA,QACE,sBACA,wBACA,wBACA,sBACA,qBACA,sBACA,WACA,SAASC,EAAMC,EAAQC,EAAQC,EAAMC,EAAKC,EAAEC,GAE7C,GAAIC,GAAUD,EAAMC,QAAUD,EAAME,WAAWC,SACxCC,UAAW,UAEXC,KAAO,SAASC,EAAIC,GAEzBC,KAAKC,SAAWf,EAAMgB,OACpBC,YAAY,EACZC,WACAC,WACAC,QACAC,MAAM,GACNR,GAGFC,KAAKQ,WAAajB,EAAE,yBACpBS,KAAKS,IAAMlB,EAAEO,GAAKY,OAAOV,KAAKQ,YAE9BR,KAAKW,UAINA,OAAS,WACR,QAASC,GAAmBC,EAAMC,GACjC5B,EAAM6B,KAAKF,EAAM,SAASG,EAAEC,GAC3B,GAAIC,GAAOD,EAAKC,IAIhB,QAHKA,IACJA,EAAO,UAEAA,GACP,IAAK,cAEJC,EAAkBF,EAAKH,EACvB,MACD,KAAK,SACJM,EAAaH,EAAKH,EAClB,MACD,KAAK,WACL,IAAK,SACJO,EAAWJ,EAAKH,EAChB,MACD,KAAK,QACJQ,EAAYL,EAAKH,EACjB,MACD,SACC,KAAM,8BAMV,QAASK,GAAkBF,EAAKH,GAC/B,GAAKS,GAAQhC,EAAE,UAAYiC,QAAO,YAAaC,KAAM,SAGrD,OAFAX,GAAUJ,OAAOa,GACjBX,EAAmBK,EAAKJ,MAAMU,GACvBA,EAGR,QAASH,GAAaH,EAAKH,GAE1B,GAAIY,GAASnC,EAAE,mDACdoC,EAAQzC,EAAMgB,SAASe,EAGpB,SAAUA,KACbS,EAAOhB,OAAOnB,EAAE,WAAaiC,QAAOP,EAAKW,cAClCD,GAAMC,MAGV,QAAUD,KACbD,EAAOhB,OAAO,IAAMO,EAAKY,YAClBF,GAAME,MAGdH,EAAOI,KAAKH,GAGZb,EAAUJ,OAAOgB,GAIlB,QAASL,GAAWJ,EAAKH,GAExB,GAAIiB,GAAiBxC,EAAE,yCACnByC,EAAkBzC,EAAE,qIACpB0C,EAAgB1C,EAAE,+BAElBoC,EAAQzC,EAAMgB,SAASe,EAEV,YAAdA,EAAKC,MACPa,EAAeG,SAAS,UAIrB,QAAUjB,KACbe,EAAgBtB,OAAOnB,EAAE,WAAaiC,QAAOP,EAAKW,cAC3CD,GAAMC,MAGV,QAAUX,KACbe,EAAgBtB,OAAO,IAAMO,EAAKY,YAC3BF,GAAME,MAGdG,EAAgBtB,OAAO,yBAGvB,KAAI,GAAIM,KAAKC,GAAKX,KAAM,CACvB,GAAI6B,GAAkBlB,EAAKX,KAAKU,GAC5BoB,EAAqB7C,EAAE,QAGvB,SAAU4C,IACbC,EAAmB1B,OAAOnB,EAAE,WAAaiC,QAAOW,EAAgBP,QAI7D,QAAUO,IACbC,EAAmB1B,OAAO,IAAMyB,EAAgBN,MAGjDO,EAAmBN,KAAKK,GAGxBF,EAAcvB,OAAO0B,GAItBL,EAAeD,KAAKH,GAEpBI,EAAerB,OAAOsB,GACtBD,EAAerB,OAAOuB,GACtBnB,EAAUJ,OAAOqB,GAIlB,QAAST,GAAYL,EAAKH,GACzB,GAAIuB,GAAc9C,EAAE,8BAChB+C,EAAgB/C,EAAE,iCAElBoC,EAAQzC,EAAMgB,SAASe,EAG3B,IAAG,UAAYA,GAAM,CACpB,GAAIsB,GAAehD,EAAE,oCACrBgD,GAAaC,KAAKvB,EAAKwB,QACvBJ,EAAY3B,OAAO6B,SAEZZ,GAAMc,OAOd,GAHAJ,EAAY3B,OAAO4B,GAGhB,SAAWrB,GAAM,CACnB,GAAIyB,GAAcnD,EAAE,oCACpBmD,GAAYF,KAAKvB,EAAK0B,OACtBN,EAAY3B,OAAOgC,SAEZf,GAAMgB,MAGdhB,EAAMT,KAAOS,EAAMiB,gBAEZjB,GAAMiB,UAGbN,EAAcR,KAAKH,GAEnBb,EAAUJ,OAAO2B,GAIlB,GAAIxB,GAAQb,KAAKC,SAASY,KACtBA,IACHD,EAAmBC,EAAMb,KAAKQ,cAejC,OARAjB,GAAEsD,GAAGC,QAAU,SAAU/C,GAGxB,MAFAA,GAAUA,MAEHC,KAAKe,KAAK,WAChB,MAAO,IAAItB,GAAQO,KAAMd,EAAMgB,SAAUH,GAAQ,OAI5CN","file":"../toolbar.js","sourcesContent":["define([\n  \"skylark-utils/langx\",\n  \"skylark-utils/browser\",\n  \"skylark-utils/eventer\",\n  \"skylark-utils/noder\",\n  \"skylark-utils/geom\",\n  \"skylark-utils/query\",\n  \"./sbswt\"\n],function(langx,browser,eventer,noder,geom,$,sbswt){\n\n\tvar Toolbar = sbswt.Toolbar = sbswt.WidgetBase.inherit({\n        klassName: \"Toolbar\",\n\n        init : function(elm,options) {\n\t\t\tvar self = this;\n\t\t\tthis._options = langx.mixin({\n\t\t\t\t\tautoredraw: true,\n\t\t\t\t\tbuttons: {},\n\t\t\t\t\tcontext: {},\n\t\t\t\t\tlist: [],\n\t\t\t\t\tshow: true,\n\t\t\t},options);\n\n\n\t\t\tthis.$container = $('<nav class=\"navbar\"/>');\n\t\t\tthis.$el = $(elm).append(this.$container);\n\n\t\t\tthis.render();\n        },\n\n\n\t\trender : function () {\n\t\t\tfunction createToolbarItems(items,container) {\n\t\t\t\tlangx.each(items,function(i,item)  {\n\t\t\t\t\tvar type = item.type;\n\t\t\t\t\tif (!type) {\n\t\t\t\t\t\ttype = \"button\";\n\t\t\t\t\t}\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase \"buttongroup\":\n\t\t\t\t\t\t\t// Create an element with the HTML\n\t\t\t\t\t\t\tcreateButtonGroup(item,container);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"button\":\n\t\t\t\t\t\t\tcreateButton(item,container)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"dropdown\":\n\t\t\t\t\t\tcase \"dropup\":\n\t\t\t\t\t\t\tcreateDrop(item,container)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"input\":\n\t\t\t\t\t\t\tcreateInput(item,container)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthrow \"Wrong widget button type\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tfunction createButtonGroup(item,container) {\n\t\t\t\tvar  group = $(\"<div/>\", { class: \"btn-group\", role: \"group\" });\n\t\t\t\tcontainer.append(group);\n\t\t\t\tcreateToolbarItems(item.items,group);\n\t\t\t\treturn group;\n\t\t\t}\n\n\t\t\tfunction createButton(item,container) {\n\t\t\t\t// Create button\n\t\t\t\tvar button = $('<button type=\"button\" class=\"btn btn-default\"/>'),\n\t\t\t\t\tattrs = langx.mixin({},item);\n\n\t\t\t\t// If has icon\n\t\t\t\tif (\"icon\" in item) {\n\t\t\t\t\tbutton.append($(\"<span/>\", { class: item.icon }));\n\t\t\t\t\tdelete attrs.icon;\n\t\t\t\t}\n\t\t\t\t// If has text\n\t\t\t\tif (\"text\" in attrs) {\n\t\t\t\t\tbutton.append(\" \" + item.text);\n\t\t\t\t\tdelete attrs.text;\n\t\t\t\t}\n\n\t\t\t\tbutton.attr(attrs);\n\n\t\t\t\t// Add button to the group\n\t\t\t\tcontainer.append(button);\n\n\t\t\t}\n\n\t\t\tfunction createDrop(item,container) {\n\t\t\t\t// Create button\n\t\t\t\tvar dropdown_group = $('<div class=\"btn-group\" role=\"group\"/>');\n\t\t\t\tvar dropdown_button = $('<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"/>');\n\t\t\t\tvar dropdown_list = $('<ul class=\"dropdown-menu\"/>');\n\n\t\t\t\tvar\tattrs = langx.mixin({},item);\n\n\t\t\t\tif(item.type === \"dropup\") {\n\t\t\t\t\tdropdown_group.addClass(\"dropup\");\n\t\t\t\t}\n\n\t\t\t\t// If has icon\n\t\t\t\tif (\"icon\" in item) {\n\t\t\t\t\tdropdown_button.append($(\"<span/>\", { class: item.icon }));\n\t\t\t\t\tdelete attrs.icon;\n\t\t\t\t}\n\t\t\t\t// If has text\n\t\t\t\tif (\"text\" in item) {\n\t\t\t\t\tdropdown_button.append(\" \" + item.text);\n\t\t\t\t\tdelete attrs.text;\n\t\t\t\t}\n\t\t\t\t// Add caret\n\t\t\t\tdropdown_button.append(' <span class=\"caret\"/>');\n\n\t\t\t\t// Add list of options\n\t\t\t\tfor(var i in item.list) {\n\t\t\t\t\tvar dropdown_option = item.list[i];\n\t\t\t\t\tvar dropdown_option_li = $('<li/>');\n\n\t\t\t\t\t// If has icon\n\t\t\t\t\tif (\"icon\" in dropdown_option) {\n\t\t\t\t\t\tdropdown_option_li.append($(\"<span/>\", { class: dropdown_option.icon }));\n\t\t\t\t\t}\n\n\t\t\t\t\t// If has text\n\t\t\t\t\tif (\"text\" in dropdown_option) {\n\t\t\t\t\t\tdropdown_option_li.append(\" \" + dropdown_option.text);\n\t\t\t\t\t}\n\t\t\t\t\t// Set attributes\n\t\t\t\t\tdropdown_option_li.attr(dropdown_option);\n\n\t\t\t\t\t// Add to dropdown list\n\t\t\t\t\tdropdown_list.append(dropdown_option_li);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Set attributes\n\t\t\t\tdropdown_group.attr(attrs);\n\n\t\t\t\tdropdown_group.append(dropdown_button);\n\t\t\t\tdropdown_group.append(dropdown_list);\n\t\t\t\tcontainer.append(dropdown_group);\n\n\t\t\t}\n\n\t\t\tfunction createInput(item,container) {\n\t\t\t\tvar input_group = $('<div class=\"input-group\"/>');\n\t\t\t\tvar input_element = $('<input class=\"form-control\"/>');\n\t\t\t\t\n\t\t\t\tvar\tattrs = langx.mixin({},item);\n\n\t\t\t\t// Add prefix addon\n\t\t\t\tif(\"prefix\" in item) {\n\t\t\t\t\tvar input_prefix = $('<span class=\"input-group-addon\"/>');\n\t\t\t\t\tinput_prefix.html(item.prefix);\n\t\t\t\t\tinput_group.append(input_prefix);\n\n\t\t\t\t\tdelete attrs.prefix;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Add input\n\t\t\t\tinput_group.append(input_element);\n\n\t\t\t\t// Add sufix addon\n\t\t\t\tif(\"sufix\" in item) {\n\t\t\t\t\tvar input_sufix = $('<span class=\"input-group-addon\"/>');\n\t\t\t\t\tinput_sufix.html(item.sufix);\n\t\t\t\t\tinput_group.append(input_sufix);\n\n\t\t\t\t\tdelete attrs.sufix;\n\t\t\t\t}\n\n\t\t\t\tattrs.type = attrs.inputType;\n\n\t\t\t\tdelete attrs.inputType;\n\n\t\t\t\t// Set attributes\n\t\t\t\tinput_element.attr(attrs);\n\n\t\t\t\tcontainer.append(input_group);\n\n\t\t\t}\n\n\t\t\tvar items = this._options.items;\n\t\t\tif (items) {\n\t\t\t\tcreateToolbarItems(items,this.$container);\n\t\t\t}\n\t\t}\n\n\t});\n\n\n\t$.fn.toolbar = function (options) {\n\t\toptions = options || {};\n\n\t\treturn this.each(function () {\n\t\t\treturn new Toolbar(this, langx.mixin({}, options,true));\n\t\t});\n\t};\n\n\treturn Toolbar;\n\n});\n"]}