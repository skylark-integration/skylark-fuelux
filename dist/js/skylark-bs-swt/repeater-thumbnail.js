/**
 * skylark-bs-swt - The skylark bootstrap standard widget tookit
 * @author Hudaokeji, Inc.
 * @version v0.9.0-beta
 * @link https://github.com/skylarkui/skylark-bs-swt/
 * @license MIT
 */
define(["skylark-utils/langx","skylark-utils/browser","skylark-utils/eventer","skylark-utils/noder","skylark-utils/geom","skylark-utils/query"],function(e,t,n,i,a,s){function l(e,t){function n(){var n,a,l;a=t.indexOf("{{"),n=t.indexOf("}}",a+2),a>-1&&n>-1?(l=s.trim(t.substring(a+2,n)),l=void 0!==e[l]?e[l]:"",t=t.substring(0,a)+l+t.substring(n+2)):i=!0}for(var i=!1;!i&&t.search("{{")>=0;)n(t);return t}s.fn.repeater&&(s.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").removeClass("selected")},s.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var e=[];return this.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){e.push(s(this))}),e},s.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(e,t){function n(){return u===e[l].index?(r=s(this),!1):void u++}function i(){r=s(this),r.is(e[l].selector)&&a(r,e[l].selected)}function a(e,n){n=void 0===n||n,n?(t||"multi"===o||d.thumbnail_clearSelectedItems(),e.addClass("selected")):e.removeClass("selected")}var l,r,c,u,o=this.viewOptions.thumbnail_selectable,d=this;for(s.isArray(e)||(e=[e]),c=t===!0||"multi"===o?e.length:o&&e.length>0?1:0,l=0;l<c;l++)void 0!==e[l].index?(r=s(),u=0,this.$canvas.find(".repeater-thumbnail-cont .selectable").each(n),r.length>0&&a(r,e[l].selected)):e[l].selector&&this.$canvas.find(".repeater-thumbnail-cont .selectable").each(i)},s.fn.repeater.defaults=e.mixin({},s.fn.repeater.defaults,{thumbnail_alignment:"left",thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_noItemsHTML:"no items found",thumbnail_selectable:!1,thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'}),s.fn.repeater.viewTypes.thumbnail={selected:function(){var e,t=this.viewOptions.thumbnail_infiniteScroll;t&&(e="object"==typeof t?t:{},this.infiniteScrolling(!0,e))},before:function(e){var t,n,i=this.viewOptions.thumbnail_alignment,a=this.$canvas.find(".repeater-thumbnail-cont"),l=e.data,r={};return a.length<1?(a=s('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>'),i&&"none"!==i?(n={center:1,justify:1,left:1,right:1},i=n[i]?i:"justify",a.addClass("align-"+i),this.thumbnail_injectSpacers=!0):this.thumbnail_injectSpacers=!1,r.item=a):r.action="none",l.items&&l.items.length<1?(t=s('<div class="empty"></div>'),t.append(this.viewOptions.thumbnail_noItemsHTML),a.append(t)):a.find(".empty:first").remove(),r},renderItem:function(e){var t=this.viewOptions.thumbnail_selectable,n="selected",i=this,a=s(l(e.subset[e.index],this.viewOptions.thumbnail_template));return a.data("item_data",e.data.items[e.index]),t&&(a.addClass("selectable"),a.on("click",function(){i.isDisabled||(a.hasClass(n)?(a.removeClass(n),i.$element.trigger("deselected.fu.repeaterThumbnail",a)):("multi"!==t&&i.$canvas.find(".repeater-thumbnail-cont .selectable.selected").each(function(){var e=s(this);e.removeClass(n),i.$element.trigger("deselected.fu.repeaterThumbnail",e)}),a.addClass(n),i.$element.trigger("selected.fu.repeaterThumbnail",a)))})),e.container.append(a),this.thumbnail_injectSpacers&&a.after('<span class="spacer">&nbsp;</span>'),this.viewOptions.thumbnail_itemRendered&&this.viewOptions.thumbnail_itemRendered({container:e.container,item:a,itemData:e.subset[e.index]},function(){}),!1}})});
//# sourceMappingURL=sourcemaps/repeater-thumbnail.js.map
